function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},o=t.parcelRequire37c5;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){a[e]=t},t.parcelRequire37c5=o),o("kyEFX").register(JSON.parse('{"5ZPII":"index.b52165a6.js","9cBl5":"noImageAvailable.4bf2d6d5.jpg","b9auz":"index.2c83ed66.js"}'));var r={API_KEY:"7cb8097836a7a1f4e5c19953961668c8",BASE_URL:"https://api.themoviedb.org/3",IMG_URL:"https://image.tmdb.org/t/p/w500/"};const{API_KEY:i,BASE_URL:l}=r,s=`${l}/search/movie?api_key=${i}&include_adult=false`;class c{fetchMoviesySearch(){return fetch(`${s}&query=${this.searchQuery}&language=${this.language}&page=${this.currentPage}`).then((e=>e.json()))}async fetchPopular(){const e=`${l}/trending/movie/day?api_key=${i}&page=${this.currentPage}`;return fetch(e).then((e=>e.json()))}async getMovieDetails(e){return fetch(`${l}/movie/${e}?api_key=${i}`).then((e=>e.json()))}async fetchById(){const e=await fetch(`${l}/movie/${this.movieId}?api_key=${i}`);return await e.json()}async fetchTrailer(e){const t=await fetch(`${l}/movie/${e}/videos?api_key=${i}`);return await t.json()}getMoviedId(e){this.movieId=e}getItemFromLS(e){return localStorage.getItem(e)}addMovie(e,t){let n=JSON.parse(this.getItemFromLS(t));return null===n&&(n=[]),n.push(e),localStorage.setItem(t,JSON.stringify(n))}deleteMovie(e){let t=JSON.parse(this.getItemFromLS(e));const n=t.filter((e=>e.id!==Number(this.movieId)));return t=n,localStorage.setItem(e,JSON.stringify(t))}incrementPage(){this.page+=1}resetPage(){this.page=1}get query(){return this.searchQuery}set query(e){this.searchQuery=e}get page(){return this.currentPage}set page(e){this.currentPage=e}constructor(){this.searchQuery="",this.currentPage=1,this.language="en-US",this.genres="",this.movieId=0}}var u=e(o("amrNH")).template({1:function(e,t,n,a,o){var r,i=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,s="function",c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <li class="films__item" data-id='+c(typeof(r=null!=(r=u(n,"id")||(null!=t?u(t,"id"):t))?r:l)===s?r.call(i,{name:"id",hash:{},data:o,loc:{start:{line:2,column:34},end:{line:2,column:40}}}):r)+'>\n\n    <a href="" class="films__wrapper">\n      <div class="films__img-wrapper">\n        <img class="films__img" src="'+c(typeof(r=null!=(r=u(n,"img")||(null!=t?u(t,"img"):t))?r:l)===s?r.call(i,{name:"img",hash:{},data:o,loc:{start:{line:6,column:37},end:{line:6,column:44}}}):r)+'" alt="'+c(typeof(r=null!=(r=u(n,"title")||(null!=t?u(t,"title"):t))?r:l)===s?r.call(i,{name:"title",hash:{},data:o,loc:{start:{line:6,column:51},end:{line:6,column:60}}}):r)+'" loading="lazy" />\n      </div>\n\n      <div class="films__info">\n        <p class="films__name">'+c(typeof(r=null!=(r=u(n,"title")||(null!=t?u(t,"title"):t))?r:l)===s?r.call(i,{name:"title",hash:{},data:o,loc:{start:{line:10,column:31},end:{line:10,column:40}}}):r)+'</p>\n\n        <p class="films__description">\n          '+c(typeof(r=null!=(r=u(n,"genre")||(null!=t?u(t,"genre"):t))?r:l)===s?r.call(i,{name:"genre",hash:{},data:o,loc:{start:{line:13,column:10},end:{line:13,column:19}}}):r)+"\n          |\n          "+c(typeof(r=null!=(r=u(n,"releaseDate")||(null!=t?u(t,"releaseDate"):t))?r:l)===s?r.call(i,{name:"releaseDate",hash:{},data:o,loc:{start:{line:15,column:10},end:{line:15,column:25}}}):r)+'\n        </p>\n      </div>\n    </a>\n\n    <div class="trailer-button">\n      <a href="#" class="video-play-btn" aria-label="watch trailer"></a>\n    </div>\n\n  </li>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,o){var r;return null!=(r=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:25,column:9}}}))?r:""},useData:!0}),d={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};[1,2,3,4,5,6,7].slice(0,4);var m;m=new URL(o("kyEFX").resolve("9cBl5"),import.meta.url).toString();const{API_KEY:g,BASE_URL:p,IMG_URL:f}=r,h=e=>e.map((e=>d[`${e}`])),_=e=>e.map((e=>e.name)),v=({genres:t=null,genre_ids:n=null,id:a,original_title:o,overview:r,popularity:i,poster_path:l,release_date:s,vote_average:c,vote_count:u})=>{return{genre:n?h(n):_(t),id:a,title:o,about:r,popularity:i,img:(g=l,g?`${f}${g}`:`${e(m)}`),releaseDate:s?(d=s,d?d.slice(0,4):data):"",vote:c,votes:u};var d,g};function y(e,t){const n=e.map((e=>{let t=v(e);return t.genre.length<=3?t.genre=t.genre.join(", "):t.genre=[t.genre[0],t.genre[1],"Other"].join(", "),t}));t.insertAdjacentHTML("beforeend",u(n))}const b=document.querySelector(".js-films-list-index");function w(){b.innerHTML=""}const S=new c,L={arrowLeft:document.querySelector("button[aria-label='previous-page'"),arrowRight:document.querySelector("button[aria-label='next-page'"),pagination:document.querySelector(".pagination"),firstButton:document.querySelector(".firstButton-and-threeDots"),lastButton:document.querySelector(".lastButton-and-threeDots"),filmsContainerIndex:document.querySelector(".js-films-list-index"),inputError:document.querySelector(".input__error")};let T,q=1;function $(e,t){if(q>T)return;q=e,T=t;let n=q-2,a=q+2;q!==T&&q+1!==T||(n=q-3,a=T),q+3===T&&(a=T),n<3&&(n=1,a=5),T<=5&&(n=q,a=T);for(let e=n;e<=a;e+=1)if(e===q){const t=`<button id="paginationButton" data-page="${e}" class="button-page paginationButton active">${e}</button>`;L.pagination.insertAdjacentHTML("beforeend",t)}else{const t=`<button id="paginationButton" data-page="${e}" class="button-page paginationButton">${e}</button>`;L.pagination.insertAdjacentHTML("beforeend",t)}if(n>=3){if(k())return;!function(){const e='<button id="paginationButton" data-page="1" class="button-page paginationButton">1</button>',t="<span class='page-buttons__first-points'>···</span>";L.firstButton.insertAdjacentHTML("beforeend",e),L.firstButton.insertAdjacentHTML("beforeend",t)}()}if(n<3&&k()&&(L.firstButton.innerHTML=""),q===T||q+1===T||q+2===T||q+3===T)return L.lastButton.innerHTML="",void(L.lastButton.style.marginRight=0);null===document.querySelector(".page-buttons__last-points")&&(!function(e){const t=`<button id="paginationButton" data-page="${e}" class="button-page paginationButton">${e}</button>`,n="<span class='page-buttons__last-points'>···</span>";L.lastButton.insertAdjacentHTML("beforeend",n),L.lastButton.insertAdjacentHTML("beforeend",t),L.lastButton.style.marginRight="10px"}(T),L.arrowLeft.onclick=x,L.arrowRight.onclick=B,L.pagination.onclick=j,L.firstButton.onclick=E,L.lastButton.onclick=M)}function E(e){"BUTTON"===e.target.nodeName&&(q=1,O(S.query,q))}function M(e){"BUTTON"===e.target.nodeName&&(q=T,O(S.query,q))}function x(){1!==q&&(q-=1,O(S.query,q))}function B(){q!==T&&(q+=1,O(S.query,q))}function I(){L.pagination.innerHTML="",L.firstButton.innerHTML="",L.lastButton.innerHTML=""}function j(e){e.preventDefault(),e.target!==e.currentTarget&&(q=Number(e.target.dataset.page),O(S.query,q))}function k(){return null!==document.querySelector(".page-buttons__first-points")}function N(e,t){S.query=e,S.page=t,sessionStorage.setItem("query",e),sessionStorage.setItem("page",t),S.fetchMoviesySearch().then((({results:e,total_pages:t})=>{0!==e.length?(w(),y(e,L.filmsContainerIndex),I(),$(S.page,t)):L.inputError.textContent="Search result not successful. Enter the correct movie name and smile : )"}))}function O(e,t){if(""===e)return q=t,S.page=q,S.query="",sessionStorage.setItem("query",S.query),sessionStorage.setItem("page",q),S.fetchPopular().then((({results:e,total_pages:t})=>{w(),y(e,L.filmsContainerIndex),I(),$(S.page,t)})),void H();N(e,t),H()}function H(){window.scrollTo(pageXOffset,0)}new c,document.querySelector(".js-films-list-index");const P=document.querySelector(".logo");window.addEventListener("load",(function(){let e=sessionStorage.getItem("query"),t=sessionStorage.getItem("page");null===e&&(e="");null===t&&(t=1);O(e,Number(t))})),P.addEventListener("click",(function(e){e.preventDefault();O("",1)}));var A=/^\s+|\s+$/g,D=/^[-+]0x[0-9a-f]+$/i,R=/^0b[01]+$/i,C=/^0o[0-7]+$/i,U=parseInt,F="object"==typeof t&&t&&t.Object===Object&&t,W="object"==typeof self&&self&&self.Object===Object&&self,Q=F||W||Function("return this")(),J=Object.prototype.toString,G=Math.max,V=Math.min,Y=function(){return Q.Date.now()};function K(e,t,n){var a,o,r,i,l,s,c=0,u=!1,d=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){var n=a,r=o;return a=o=void 0,c=t,i=e.apply(r,n)}function p(e){return c=e,l=setTimeout(h,t),u?g(e):i}function f(e){var n=e-s;return void 0===s||n>=t||n<0||d&&e-c>=r}function h(){var e=Y();if(f(e))return _(e);l=setTimeout(h,function(e){var n=t-(e-s);return d?V(n,r-(e-c)):n}(e))}function _(e){return l=void 0,m&&a?g(e):(a=o=void 0,i)}function v(){var e=Y(),n=f(e);if(a=arguments,o=this,s=e,n){if(void 0===l)return p(s);if(d)return l=setTimeout(h,t),g(s)}return void 0===l&&(l=setTimeout(h,t)),i}return t=z(t)||0,X(n)&&(u=!!n.leading,r=(d="maxWait"in n)?G(z(n.maxWait)||0,t):r,m="trailing"in n?!!n.trailing:m),v.cancel=function(){void 0!==l&&clearTimeout(l),c=0,a=s=o=l=void 0},v.flush=function(){return void 0===l?i:_(Y())},v}function X(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function z(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==J.call(e)}(e))return NaN;if(X(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=X(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(A,"");var n=R.test(e);return n||C.test(e)?U(e.slice(2),n?2:8):D.test(e)?NaN:+e}const Z=new c,ee=document.querySelector(".input__wraper"),te=document.querySelector(".input__error");document.querySelector(".js-films-list-index");ee.addEventListener("submit",(function(e){if(e.preventDefault(),Z.query=e.currentTarget.searchQuery.value.trim(),te.textContent=" ",Z.resetPage(),!Z.query)return void(te.textContent="Please enter something to search ");N(Z.query,Z.page)})),o("jxohN");let ne="",ae={};const oe=[],re=[],ie=(e,t)=>{try{const n=JSON.stringify(t);localStorage.setItem(e,n)}catch(e){console.error("Set state error: ",e.message)}},le=e=>{try{const t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}};function se(e){if("BUTTON"!==e.target.nodeName)return;ne=document.querySelector(".modal__button-active"),e.currentTarget.textContent="Remove from watched",e.currentTarget.classList.toggle("modal__button-active");const t=le("allWatchedMovies");if(ne){let n;e.currentTarget.textContent="add to Watched",t.forEach((({id:e},t)=>e===ae.id?n=t:t)),oe.splice(n,1),ie("allWatchedMovies",oe)}!!t&&t.find((({id:e})=>e===ae.id))||(oe.push(ae),ie("allWatchedMovies",oe))}function ce(e){if("BUTTON"!==e.target.nodeName)return;ne=document.querySelector(".modal__button-active"),e.currentTarget.textContent="Remove from Queue",e.currentTarget.classList.toggle("modal__button-active");const t=le("allQueueMovies");if(ne){let n;e.currentTarget.textContent="add to Queue",t.forEach((({id:e},t)=>e===ae.id?n=t:t)),re.splice(n,1),ie("allWatchedMovies",re)}!!t&&t.find((({id:e})=>e===ae.id))||(re.push(ae),ie("allQueueMovies",re))}var ue=o("9B8F0");const de=new c,me=document.querySelector(".trailer__window"),ge=document.querySelector(".trailer__backdrop");function pe(e){const t=e.currentTarget.dataset.id;de.fetchTrailer(t).then((({results:e})=>{e.forEach((e=>{if("Official Trailer"===e.name){console.log(e.key);document.querySelector(".basicLightbox .modal__container").classList.add("visually-hidden"),t=e.key,console.log(t),ge.classList.remove("visually-hidden"),me.innerHTML=`\n  <iframe class="trailer__iframe" width="700" height="500" src="https://www.youtube.com/embed/${t}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>\n  `,ge.addEventListener("click",(e=>{e.target===ge&&fe()}))}var t}))}))}function fe(){document.querySelector(".basicLightbox .modal__container").classList.remove("visually-hidden"),ge.classList.add("visually-hidden"),me.innerHTML=""}ge.addEventListener("click",(e=>{e.target===ge&&fe()}));const{IMG_URL:he}=r,_e=new c;async function ve(e){const t=await _e.getMovieDetails(e).then((e=>e)),n=v(t);return ae=n,n}({cardContainer:document.querySelector(".films__container")}).cardContainer.addEventListener("click",(async function(e){if(e.preventDefault(),"DIV"!==e.target.nodeName&&"UL"!==e.target.nodeName){if("IMG"===e.target.nodeName){const n=e.target.parentElement.parentElement.parentElement.dataset.id;t(await ve(n))}if("P"===e.target.nodeName){const n=e.target.parentElement.parentElement.parentElement.dataset.id;t(await ve(n))}}function t({id:e,img:t,title:n,popularity:a,vote:o,votes:r,about:i,genre:l}){const s=ue.create(`\n    <div class="modal__container">\n      <div class="modal__close">\n        <div class="modal__close-first"></div>\n        <div class="modal__close-second"></div>\n      </div>\n      <div class="modal-wrap">\n        <div class="modal__picture-wrap">\n          <img\n          class="modal__picture"\n          src="${t}"\n          alt="film-picture"\n          />\n          <button class="modal__button-play trailer-button" data-id="${e}">\n            <img class="modal__img-play" src="https://www.freepnglogos.com/uploads/play-button-png/play-button-file-youtube-play-buttom-icon-svg-wikimedia-commons-27.png" alt="play trailer" width="100" height="100" />\n\t\t\t\t\t</button>\n        </div>\n        <div class="modal__desc-wrap">\n          <h2 class="modal-heading">${n}</h2>\n          <div class="modal__rating-wrap">\n            <ul class="modal__rating-left-list">\n              <li class="modal__rating-left-item">Vote / Votes</li>\n              <li class="modal__rating-left-item">Popularity</li>\n              <li class="modal__rating-left-item">Original Title</li>\n              <li class="modal__rating-left-item">Genre</li>\n            </ul>\n            <ul class="modal__rating-right-list">\n              <li class="modal__rating-right-item">\n                <span class="modal__rating-right-item--color">${o}</span> /\n                <span class="modal__rating-right-item--shadow">${r}</span>\n              </li>\n              <li class="modal__rating-right-item">${a}</li>\n              <li class="modal__rating-right-item modal__rating-right-item--uppercase">${n}</li>\n              <li class="modal__rating-right-item">${l}</li>\n            </ul>\n          </div>\n          <div class="modal__content-wrap">\n            <h4 class="modal__content-heading">About</h4>\n            <p class="modal__content">\n              ${i}\n            </p>\n          </div>\n          <div class="modal__button-wrap" data-id="${e}">\n            <button class="modal__button btn-watch">add to Watched</button>\n            <button class="modal__button btn-queue modal__button--transparent">\n              add to queue\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  `,{onShow:e=>{window.addEventListener("keydown",c),window.addEventListener("click",u),e.element().querySelector(".modal__close").onclick=e.close},onClose:e=>{window.removeEventListener("keydown",c),window.removeEventListener("click",u)}});function c(e){"Escape"===e.code&&s.close()}function u(e){console.log(e.target.classList.value),"basicLightbox__placeholder"===e.target.classList.value&&s.close()}s.show()}document.querySelector(".modal__button-play").addEventListener("click",pe),document.querySelector(".btn-watch").addEventListener("click",se),document.querySelector(".btn-queue").addEventListener("click",ce)})),o("iiPHV");
//# sourceMappingURL=index.b52165a6.js.map
