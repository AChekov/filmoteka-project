function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},o=t.parcelRequire37c5;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){a[e]=t},t.parcelRequire37c5=o),o("kyEFX").register(JSON.parse('{"5ZPII":"index.e6ea7e2c.js","9cBl5":"noImageAvailable.4bf2d6d5.jpg","b9auz":"index.2c83ed66.js"}'));var r={API_KEY:"7cb8097836a7a1f4e5c19953961668c8",BASE_URL:"https://api.themoviedb.org/3",IMG_URL:"https://image.tmdb.org/t/p/w500/"};const{API_KEY:i,BASE_URL:l}=r,s=`${l}/search/movie?api_key=${i}&include_adult=false`;class c{fetchMoviesySearch(){return fetch(`${s}&query=${this.searchQuery}&language=${this.language}&page=${this.currentPage}`).then((e=>e.json()))}async fetchPopular(){const e=`${l}/trending/movie/day?api_key=${i}&page=${this.currentPage}`;return fetch(e).then((e=>e.json()))}async getMovieDetails(e){return fetch(`${l}/movie/${e}?api_key=${i}`).then((e=>e.json()))}async fetchById(){const e=await fetch(`${l}/movie/${this.movieId}?api_key=${i}`);return await e.json()}async fetchTrailer(e){const t=await fetch(`${l}/movie/${e}/videos?api_key=${i}`);return await t.json()}getMoviedId(e){this.movieId=e}getItemFromLS(e){return localStorage.getItem(e)}addMovie(e,t){let n=JSON.parse(this.getItemFromLS(t));return null===n&&(n=[]),n.push(e),localStorage.setItem(t,JSON.stringify(n))}deleteMovie(e){let t=JSON.parse(this.getItemFromLS(e));const n=t.filter((e=>e.id!==Number(this.movieId)));return t=n,localStorage.setItem(e,JSON.stringify(t))}incrementPage(){this.page+=1}resetPage(){this.page=1}get query(){return this.searchQuery}set query(e){this.searchQuery=e}get page(){return this.currentPage}set page(e){this.currentPage=e}constructor(){this.searchQuery="",this.currentPage=1,this.language="en-US",this.genres="",this.movieId=0}}var u=e(o("amrNH")).template({1:function(e,t,n,a,o){var r,i=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,s="function",c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <li class="films__item" data-id='+c(typeof(r=null!=(r=u(n,"id")||(null!=t?u(t,"id"):t))?r:l)===s?r.call(i,{name:"id",hash:{},data:o,loc:{start:{line:2,column:34},end:{line:2,column:40}}}):r)+'>\n\n    <a href="" class="films__wrapper">\n      <div class="films__img-wrapper">\n        <img class="films__img" src="'+c(typeof(r=null!=(r=u(n,"img")||(null!=t?u(t,"img"):t))?r:l)===s?r.call(i,{name:"img",hash:{},data:o,loc:{start:{line:6,column:37},end:{line:6,column:44}}}):r)+'" alt="'+c(typeof(r=null!=(r=u(n,"title")||(null!=t?u(t,"title"):t))?r:l)===s?r.call(i,{name:"title",hash:{},data:o,loc:{start:{line:6,column:51},end:{line:6,column:60}}}):r)+'" loading="lazy" />\n      </div>\n\n      <div class="films__info">\n        <p class="films__name">'+c(typeof(r=null!=(r=u(n,"title")||(null!=t?u(t,"title"):t))?r:l)===s?r.call(i,{name:"title",hash:{},data:o,loc:{start:{line:10,column:31},end:{line:10,column:40}}}):r)+'</p>\n\n        <p class="films__description">\n          '+c(typeof(r=null!=(r=u(n,"genre")||(null!=t?u(t,"genre"):t))?r:l)===s?r.call(i,{name:"genre",hash:{},data:o,loc:{start:{line:13,column:10},end:{line:13,column:19}}}):r)+"\n          |\n          "+c(typeof(r=null!=(r=u(n,"releaseDate")||(null!=t?u(t,"releaseDate"):t))?r:l)===s?r.call(i,{name:"releaseDate",hash:{},data:o,loc:{start:{line:15,column:10},end:{line:15,column:25}}}):r)+'\n        </p>\n      </div>\n    </a>\n\n    <div class="trailer-button">\n      <a href="#" class="video-play-btn" aria-label="watch trailer"></a>\n    </div>\n\n  </li>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,o){var r;return null!=(r=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:25,column:9}}}))?r:""},useData:!0}),d={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};[1,2,3,4,5,6,7].slice(0,4);var m;m=new URL(o("kyEFX").resolve("9cBl5"),import.meta.url).toString();const{API_KEY:p,BASE_URL:g,IMG_URL:f}=r,_=e=>e.map((e=>d[`${e}`])),h=e=>e.map((e=>e.name)),v=({genres:t=null,genre_ids:n=null,id:a,original_title:o,overview:r,popularity:i,poster_path:l,release_date:s,vote_average:c,vote_count:u})=>{return{genre:n?_(n):h(t),id:a,title:o,about:r,popularity:i,img:(p=l,p?`${f}${p}`:`${e(m)}`),releaseDate:s?(d=s,d?d.slice(0,4):data):"",vote:c,votes:u};var d,p};function y(e,t){const n=e.map((e=>{let t=v(e);return t.genre.length<=3?t.genre=t.genre.join(", "):t.genre=[t.genre[0],t.genre[1],"Other"].join(", "),t}));t.insertAdjacentHTML("beforeend",u(n))}const b=document.querySelector(".js-films-list-index");function w(){b.innerHTML=""}const S=new c,T={arrowLeft:document.querySelector("button[aria-label='previous-page'"),arrowRight:document.querySelector("button[aria-label='next-page'"),pagination:document.querySelector(".pagination"),firstButton:document.querySelector(".firstButton-and-threeDots"),lastButton:document.querySelector(".lastButton-and-threeDots"),filmsContainerIndex:document.querySelector(".js-films-list-index"),inputError:document.querySelector(".input__error")};let L,$=1;function M(e,t){if($>L)return;$=e,L=t;let n=$-2,a=$+2;$!==L&&$+1!==L||(n=$-3,a=L),$+3===L&&(a=L),n<3&&(n=1,a=5),L<=5&&(n=$,a=L);for(let e=n;e<=a;e+=1)if(e===$){const t=`<button id="paginationButton" data-page="${e}" class="button-page paginationButton active">${e}</button>`;T.pagination.insertAdjacentHTML("beforeend",t)}else{const t=`<button id="paginationButton" data-page="${e}" class="button-page paginationButton">${e}</button>`;T.pagination.insertAdjacentHTML("beforeend",t)}if(n>=3){if(k())return;!function(){const e='<button id="paginationButton" data-page="1" class="button-page paginationButton">1</button>',t="<span class='page-buttons__first-points'>···</span>";T.firstButton.insertAdjacentHTML("beforeend",e),T.firstButton.insertAdjacentHTML("beforeend",t)}()}n<3&&k()&&(T.firstButton.innerHTML=""),$!==L&&$+1!==L&&$+2!==L&&$+3!==L?null===document.querySelector(".page-buttons__last-points")&&(!function(e){const t=`<button id="paginationButton" data-page="${e}" class="button-page paginationButton">${e}</button>`,n="<span class='page-buttons__last-points'>···</span>";T.lastButton.insertAdjacentHTML("beforeend",n),T.lastButton.insertAdjacentHTML("beforeend",t)}(L),T.arrowLeft.onclick=j,T.arrowRight.onclick=B,T.pagination.onclick=N,T.firstButton.onclick=q,T.lastButton.onclick=E):T.lastButton.innerHTML=""}function q(e){"BUTTON"===e.target.nodeName&&($=1,O())}function E(e){"BUTTON"===e.target.nodeName&&($=L,O())}function j(){1!==$&&($-=1,O())}function B(){$!==L&&($+=1,O())}function x(){T.pagination.innerHTML="",T.firstButton.innerHTML="",T.lastButton.innerHTML=""}function N(e){e.preventDefault(),e.target!==e.currentTarget&&($=Number(e.target.dataset.page),O())}function k(){return null!==document.querySelector(".page-buttons__first-points")}function I(e,t){S.query=e,S.page=t,S.fetchMoviesySearch().then((({results:e,total_pages:t})=>{0!==e.length?(w(),y(e,T.filmsContainerIndex),x(),M(S.page,t)):T.inputError.textContent="Search result not successful. Enter the correct movie name and smile : )"}))}function O(){if(""===S.query)return S.page=$,S.fetchPopular().then((({results:e,total_pages:t})=>{w(),y(e,T.filmsContainerIndex),x(),M(S.page,t)})),void H();I(S.query,$),H()}function H(){window.scrollTo(pageXOffset,0)}const P=new c,A=document.querySelector(".js-films-list-index");window.addEventListener("load",(function(){P.fetchPopular().then((({results:e,total_pages:t})=>{y(e,A),M(P.page,t)}))}));var C=/^\s+|\s+$/g,D=/^[-+]0x[0-9a-f]+$/i,R=/^0b[01]+$/i,U=/^0o[0-7]+$/i,F=parseInt,Q="object"==typeof t&&t&&t.Object===Object&&t,J="object"==typeof self&&self&&self.Object===Object&&self,W=Q||J||Function("return this")(),G=Object.prototype.toString,V=Math.max,Y=Math.min,K=function(){return W.Date.now()};function X(e,t,n){var a,o,r,i,l,s,c=0,u=!1,d=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=a,r=o;return a=o=void 0,c=t,i=e.apply(r,n)}function g(e){return c=e,l=setTimeout(_,t),u?p(e):i}function f(e){var n=e-s;return void 0===s||n>=t||n<0||d&&e-c>=r}function _(){var e=K();if(f(e))return h(e);l=setTimeout(_,function(e){var n=t-(e-s);return d?Y(n,r-(e-c)):n}(e))}function h(e){return l=void 0,m&&a?p(e):(a=o=void 0,i)}function v(){var e=K(),n=f(e);if(a=arguments,o=this,s=e,n){if(void 0===l)return g(s);if(d)return l=setTimeout(_,t),p(s)}return void 0===l&&(l=setTimeout(_,t)),i}return t=Z(t)||0,z(n)&&(u=!!n.leading,r=(d="maxWait"in n)?V(Z(n.maxWait)||0,t):r,m="trailing"in n?!!n.trailing:m),v.cancel=function(){void 0!==l&&clearTimeout(l),c=0,a=s=o=l=void 0},v.flush=function(){return void 0===l?i:h(K())},v}function z(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Z(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==G.call(e)}(e))return NaN;if(z(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=z(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(C,"");var n=R.test(e);return n||U.test(e)?F(e.slice(2),n?2:8):D.test(e)?NaN:+e}const ee=new c,te=document.querySelector(".input__wraper"),ne=document.querySelector(".input__error");document.querySelector(".js-films-list-index");te.addEventListener("submit",(function(e){if(e.preventDefault(),ee.query=e.currentTarget.searchQuery.value.trim(),ne.textContent=" ",ee.resetPage(),!ee.query)return void(ne.textContent="Please enter something to search ");I(ee.query,ee.page)})),o("jxohN");let ae="",oe={};const re=[],ie=[],le=(e,t)=>{try{const n=JSON.stringify(t);localStorage.setItem(e,n)}catch(e){console.error("Set state error: ",e.message)}},se=e=>{try{const t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}};function ce(e){if("BUTTON"!==e.target.nodeName)return;ae=document.querySelector(".modal__button-active");e.currentTarget.parentNode.dataset.id;e.currentTarget.textContent="Remove from watched",e.currentTarget.classList.toggle("modal__button-active"),ae&&(e.currentTarget.textContent="add to Watched"),le("watchedMovies",oe);const t=se("watchedMovies");re.push(t),le("allWatchedMovies",re)}function ue(e){if("BUTTON"!==e.target.nodeName)return;ae=document.querySelector(".modal__button-active");e.currentTarget.parentNode.dataset.id;e.currentTarget.textContent="Remove from Queue",e.currentTarget.classList.toggle("modal__button-active"),ae&&(e.currentTarget.textContent="add to Queue"),le("queueMovies",oe);const t=se("queueMovies");ie.push(t),le("allQueueMovies",ie)}var de=o("9B8F0");const me=new c,pe=document.querySelector(".trailer__window"),ge=document.querySelector(".trailer__backdrop");function fe(e){const t=e.currentTarget.dataset.id;me.fetchTrailer(t).then((({results:e})=>{e.forEach((e=>{var t;"Official Trailer"===e.name&&(console.log(e.key),t=e.key,console.log(t),ge.classList.remove("visually-hidden"),pe.innerHTML=`\n  <iframe class="trailer__iframe" width="700" height="500" src="https://www.youtube.com/embed/${t}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>\n  `,ge.addEventListener("click",(e=>{e.target===ge&&_e()})))}))}))}function _e(){ge.classList.add("visually-hidden"),pe.innerHTML=""}ge.addEventListener("click",(e=>{e.target===ge&&_e()}));const{IMG_URL:he}=r,ve=new c;async function ye(e){const t=await ve.getMovieDetails(e).then((e=>e)),n=v(t);return oe=n,n}({cardContainer:document.querySelector(".films__container")}).cardContainer.addEventListener("click",(async function(e){if(e.preventDefault(),"DIV"!==e.target.nodeName&&"UL"!==e.target.nodeName){if("IMG"===e.target.nodeName){const n=e.target.parentElement.dataset.id;t(await ye(n))}if("P"===e.target.nodeName){const n=e.target.parentElement.parentElement.dataset.id;t(await ye(n))}}function t({id:e,img:t,title:n,popularity:a,vote:o,votes:r,about:i,genre:l}){const s=de.create(`\n    <div class="modal__container">\n      <div class="modal__close">\n        <div class="modal__close-first"></div>\n        <div class="modal__close-second"></div>\n      </div>\n      <div class="modal-wrap">\n        <div class="modal__picture-wrap">\n          <img\n          class="modal__picture"\n          src="${t}"\n          alt="film-picture"\n          />\n          <button class="modal__button-play trailer-button" data-id="${e}">\n            <img class="modal__img-play" src="https://www.freepnglogos.com/uploads/play-button-png/play-button-file-youtube-play-buttom-icon-svg-wikimedia-commons-27.png" alt="play trailer" width="100" height="100" />\n\t\t\t\t\t</button>\n        </div>\n        <div class="modal__desc-wrap">\n          <h2 class="modal-heading">${n}</h2>\n          <div class="modal__rating-wrap">\n            <ul class="modal__rating-left-list">\n              <li class="modal__rating-left-item">Vote / Votes</li>\n              <li class="modal__rating-left-item">Popularity</li>\n              <li class="modal__rating-left-item">Original Title</li>\n              <li class="modal__rating-left-item">Genre</li>\n            </ul>\n            <ul class="modal__rating-right-list">\n              <li class="modal__rating-right-item">\n                <span class="modal__rating-right-item--color">${o}</span> /\n                <span class="modal__rating-right-item--shadow">${r}</span>\n              </li>\n              <li class="modal__rating-right-item">${a}</li>\n              <li class="modal__rating-right-item modal__rating-right-item--uppercase">${n}</li>\n              <li class="modal__rating-right-item">${l}</li>\n            </ul>\n          </div>\n          <div class="modal__content-wrap">\n            <h4 class="modal__content-heading">About</h4>\n            <p class="modal__content">\n              ${i}\n            </p>\n          </div>\n          <div class="modal__button-wrap" data-id="${e}">\n            <button class="modal__button btn-watch">add to Watched</button>\n            <button class="modal__button btn-queue modal__button--transparent">\n              add to queue\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  `,{onShow:e=>{window.addEventListener("keydown",c),window.addEventListener("click",u),e.element().querySelector(".modal__close").onclick=e.close},onClose:e=>{window.removeEventListener("keydown",c),window.removeEventListener("click",u)}});function c(e){"Escape"===e.code&&s.close()}function u(e){console.log(e.target.classList.value),"basicLightbox__placeholder"===e.target.classList.value&&s.close()}s.show()}document.querySelector(".modal__button-play").addEventListener("click",fe),document.querySelector(".btn-watch").addEventListener("click",ce),document.querySelector(".btn-queue").addEventListener("click",ue)})),o("iiPHV");
//# sourceMappingURL=index.e6ea7e2c.js.map
