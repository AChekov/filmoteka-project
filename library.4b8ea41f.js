function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},l={},a=n.parcelRequire37c5;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in l){var n=l[e];delete l[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,n){l[e]=n},n.parcelRequire37c5=a),a("jxohN");var o=e(a("amrNH")).template({1:function(e,n,t,l,a){var o,i=null!=n?n:e.nullContext||{},r=e.hooks.helperMissing,s="function",c=e.escapeExpression,d=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'  <li class="films__item" data-id='+c(typeof(o=null!=(o=d(t,"id")||(null!=n?d(n,"id"):n))?o:r)===s?o.call(i,{name:"id",hash:{},data:a,loc:{start:{line:2,column:34},end:{line:2,column:40}}}):o)+'>\n\n    <a href="" class="films__wrapper">\n      <div class="films__img-wrapper">\n        <img class="films__img" src="'+c(typeof(o=null!=(o=d(t,"img")||(null!=n?d(n,"img"):n))?o:r)===s?o.call(i,{name:"img",hash:{},data:a,loc:{start:{line:6,column:37},end:{line:6,column:44}}}):o)+'" alt="'+c(typeof(o=null!=(o=d(t,"title")||(null!=n?d(n,"title"):n))?o:r)===s?o.call(i,{name:"title",hash:{},data:a,loc:{start:{line:6,column:51},end:{line:6,column:60}}}):o)+'" loading="lazy" />\n      </div>\n\n      <div class="films__info">\n        <p class="films__name">'+c(typeof(o=null!=(o=d(t,"title")||(null!=n?d(n,"title"):n))?o:r)===s?o.call(i,{name:"title",hash:{},data:a,loc:{start:{line:10,column:31},end:{line:10,column:40}}}):o)+'</p>\n\n        <p class="films__description">\n          '+c(typeof(o=null!=(o=d(t,"genre")||(null!=n?d(n,"genre"):n))?o:r)===s?o.call(i,{name:"genre",hash:{},data:a,loc:{start:{line:13,column:10},end:{line:13,column:19}}}):o)+"\n          |\n          "+c(typeof(o=null!=(o=d(t,"releaseDate")||(null!=n?d(n,"releaseDate"):n))?o:r)===s?o.call(i,{name:"releaseDate",hash:{},data:a,loc:{start:{line:15,column:10},end:{line:15,column:25}}}):o)+'<span class="rating-on-library-card">'+c(typeof(o=null!=(o=d(t,"vote")||(null!=n?d(n,"vote"):n))?o:r)===s?o.call(i,{name:"vote",hash:{},data:a,loc:{start:{line:15,column:62},end:{line:15,column:70}}}):o)+"</span>\n        </p>\n      </div>\n    </a>\n    \n  </li>\n"},compiler:[8,">= 4.3.0"],main:function(e,n,t,l,a){var o;return null!=(o=(e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]})(t,"each").call(null!=n?n:e.nullContext||{},n,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:1,column:0},end:{line:21,column:9}}}))?o:""},useData:!0}),i=a("9B8F0"),r=a("gC8Yz"),s=a("cgPbV");const c=e=>{try{const n=localStorage.getItem(e);return null===n?void 0:JSON.parse(n)}catch(e){console.error("Get state error: ",e.message)}},d=document.querySelector(".js-films-list-library"),u=(document.querySelector(".library__queue-btn"),document.querySelector(".library__watched-btn"));window.addEventListener("load",_),u.addEventListener("click",_);const m=c("allWatchedMovies");function _(e){!function(e){const n=e.map((e=>(e.genre.length<=3?e.genre=e.genre.join(", "):e.genre=[e.genre[0],e.genre[1],"Other"].join(", "),e)));d.innerHTML="",d.insertAdjacentHTML("beforeend",o(n))}(c("allWatchedMovies"))}console.log(m);const{IMG_URL:g}=r.default;({cardContainer:document.querySelector(".films__container")}).cardContainer.addEventListener("click",(async function(e){if(e.preventDefault(),console.log(e.target),"DIV"!==e.target.nodeName&&"UL"!==e.target.nodeName){if("IMG"===e.target.nodeName){const t=Number(e.target.parentElement.parentElement.parentElement.dataset.id);console.log(t);const l=c("allWatchedMovies");console.log(l);const a=l.find((e=>e.id===t));console.log(a),n(a)}if("P"===e.target.nodeName){const t=e.target.parentElement.parentElement.parentElement.dataset.id,l=c("allWatchedMovies").find((e=>e.id===t));console.log(l),n(l)}}function n({id:e,img:n,title:t,popularity:l,vote:a,votes:o,about:r,genre:s}){const c=i.create(`\n    <div class="modal__container">\n      <div class="modal__close">\n        <div class="modal__close-first"></div>\n        <div class="modal__close-second"></div>\n      </div>\n      <div class="modal-wrap">\n        <div class="modal__picture-wrap">\n          <img\n          class="modal__picture"\n          src="${n}"\n          alt="film-picture"\n          />\n          <button class="modal__button-play trailer-button" data-id="${e}">\n            <img class="modal__img-play" src="https://www.freepnglogos.com/uploads/play-button-png/play-button-file-youtube-play-buttom-icon-svg-wikimedia-commons-27.png" alt="play trailer" width="100" height="100" />\n\t\t\t\t\t</button>\n        </div>\n        <div class="modal__desc-wrap">\n          <h2 class="modal-heading">${t}</h2>\n          <div class="modal__rating-wrap">\n            <ul class="modal__rating-left-list">\n              <li class="modal__rating-left-item">Vote / Votes</li>\n              <li class="modal__rating-left-item">Popularity</li>\n              <li class="modal__rating-left-item">Original Title</li>\n              <li class="modal__rating-left-item">Genre</li>\n            </ul>\n            <ul class="modal__rating-right-list">\n              <li class="modal__rating-right-item">\n                <span class="modal__rating-right-item--color">${a}</span> /\n                <span class="modal__rating-right-item--shadow">${o}</span>\n              </li>\n              <li class="modal__rating-right-item">${l}</li>\n              <li class="modal__rating-right-item modal__rating-right-item--uppercase">${t}</li>\n              <li class="modal__rating-right-item">${s}</li>\n            </ul>\n          </div>\n          <div class="modal__content-wrap">\n            <h4 class="modal__content-heading">About</h4>\n            <p class="modal__content">\n              ${r}\n            </p>\n          </div>\n          <div class="modal__button-wrap" data-id="${e}">\n            <button class="modal__button btn-watch">add to Watched</button>\n            <button class="modal__button btn-queue modal__button--transparent">\n              add to queue\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  `,{onShow:e=>{window.addEventListener("keydown",d),window.addEventListener("click",u),e.element().querySelector(".modal__close").onclick=e.close},onClose:e=>{window.removeEventListener("keydown",d),window.removeEventListener("click",u)}});function d(e){"Escape"===e.code&&c.close()}function u(e){console.log(e.target.classList.value),"basicLightbox__placeholder"===e.target.classList.value&&c.close()}c.show()}(0,s.addListener)()}));const p=document.querySelector(".js-films-list-library"),f=document.querySelector(".library__queue-btn");document.querySelector(".library__watched-btn");f.addEventListener("click",(function(e){!function(e){const n=e.map((e=>(e.genre.length<=3?e.genre=e.genre.join(", "):e.genre=[e.genre[0],e.genre[1],"Other"].join(", "),e)));p.innerHTML="",p.insertAdjacentHTML("beforeend",o(n))}((e=>{try{const n=localStorage.getItem(e);return null===n?void 0:JSON.parse(n)}catch(e){console.error("Get state error: ",e.message)}})("allQueueMovies"))})),a("iiPHV");const v=document.querySelector(".library__watched-btn"),h=document.querySelector(".library__queue-btn");document.querySelector(".button-group").addEventListener("click",(function(e){if("BUTTON"!==e.target.nodeName)return;if(e.target.classList.contains("library__watched-btn"))return v.classList.add("is-active"),void h.classList.remove("is-active");if(e.target.classList.contains("library__queue-btn"))return v.classList.remove("is-active"),void h.classList.add("is-active")})),a("4OWG9");
//# sourceMappingURL=library.4b8ea41f.js.map
