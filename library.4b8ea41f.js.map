{"mappings":"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","sources":["src/library.js","src/templates/library-films.hbs","src/js/js-partials/renderWatchedList.js","src/js/js-partials/renderQueueList.js","src/js/js-partials/onLibraryBtnsClick.js"],"sourcesContent":["// import './js/js-partials/API';\n// import './js/js-partials/appendFilmsMarkup';\n// import './js/js-partials/clearFilmsContainer';\nimport './js/js-partials/teamModal';\nimport './js/js-partials/renderWatchedList';\nimport './js/js-partials/renderQueueList';\n// import './js/js-partials/openModalFilm';\nimport './js/js-partials/loader';\nimport './js/js-partials//onLibraryBtnsClick';\nimport \"./js/js-partials/theme\";","{{#each this}}\n  <li class=\"films__item\" data-id={{id}}>\n\n    <a href=\"\" class=\"films__wrapper\">\n      <div class=\"films__img-wrapper\">\n        <img class=\"films__img\" src=\"{{img}}\" alt=\"{{title}}\" loading=\"lazy\" />\n      </div>\n\n      <div class=\"films__info\">\n        <p class=\"films__name\">{{title}}</p>\n\n        <p class=\"films__description\">\n          {{genre}}\n          |\n          {{releaseDate}}<span class=\"rating-on-library-card\">{{vote}}</span>\n        </p>\n      </div>\n    </a>\n    \n  </li>\n{{/each}}","import filmCard from \"../../templates/library-films.hbs\";\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error(\"Get state error: \", error.message);\n  }\n};\n\n\nconst library = document.querySelector(\".js-films-list-library\");\nconst queueBtn = document.querySelector(\".library__queue-btn\");\nconst watchedBtn = document.querySelector(\".library__watched-btn\");\n\nwindow.addEventListener(\"load\", renderLibrary);\nwatchedBtn.addEventListener(\"click\", renderLibrary);\n\nconst loadWatched = load(\"allWatchedMovies\");\nconsole.log(loadWatched);\n\nfunction renderLibrary(e) {\n  const loadWatched = load(\"allWatchedMovies\");\n  appendFilm(loadWatched);\n}\n\nfunction appendFilm(films) {\n  const normalObjs = films.map(film => {\n    film.genre.length <= 3\n      ? (film.genre = film.genre.join(\", \"))\n      : (film.genre = [film.genre[0], film.genre[1], \"Other\"].join(\", \"));\n    return film;\n  });\n  library.innerHTML = \"\";\n  library.insertAdjacentHTML(\"beforeend\", filmCard(normalObjs));\n}\n\n// --------РЕНДЕР МОДАЛКИ-------\n\nimport * as basicLightbox from \"basiclightbox\";\nimport settings from \"./settings\";\n// import { createConst, addWatched, addQueue } from \"./onButtonClick\";\n// import { normalizationMovieObj } from \"./normalization-obj\";\n// import { savedLocalInfo } from \"./onButtonClick\";\nimport { addListener } from \"./trailer\";\nconst { IMG_URL } = settings;\n\nconst ref = {\n  cardContainer: document.querySelector(\".films__container\"),\n};\n\nref.cardContainer.addEventListener(\"click\", onClickCard);\n\nasync function onClickCard(e) {\n  e.preventDefault();\n\n  console.log(e.target);\n  if (e.target.nodeName !== \"DIV\" && e.target.nodeName !== \"UL\") {\n    if (e.target.nodeName === \"IMG\") {\n      const id = Number(e.target.parentElement.parentElement.parentElement.dataset.id);\n      console.log(id);\n      // console.log(e.target.parentElement.parentElement.parentElement);\n      const allDetails = load(\"allWatchedMovies\");\n      console.log(allDetails);\n      const details = allDetails.find(element => element.id === id);\n      console.log(details);\n      renderModal(details);\n    }\n    if (e.target.nodeName === \"P\") {\n      const id = e.target.parentElement.parentElement.parentElement.dataset.id;\n      // console.log(e.target.parentElement.parentElement.parentElement);\n      const allDetails = load(\"allWatchedMovies\");\n      const details = allDetails.find(element => element.id === id);\n      console.log(details);\n      renderModal(details);\n    }\n  }\n\n  function renderModal({\n    id,\n    img,\n    title,\n    popularity,\n    vote,\n    votes,\n    about,\n    genre,\n  }) {\n    const modal = basicLightbox.create(\n      `\n    <div class=\"modal__container\">\n      <div class=\"modal__close\">\n        <div class=\"modal__close-first\"></div>\n        <div class=\"modal__close-second\"></div>\n      </div>\n      <div class=\"modal-wrap\">\n        <div class=\"modal__picture-wrap\">\n          <img\n          class=\"modal__picture\"\n          src=\"${img}\"\n          alt=\"film-picture\"\n          />\n          <button class=\"modal__button-play trailer-button\" data-id=\"${id}\">\n            <img class=\"modal__img-play\" src=\"https://www.freepnglogos.com/uploads/play-button-png/play-button-file-youtube-play-buttom-icon-svg-wikimedia-commons-27.png\" alt=\"play trailer\" width=\"100\" height=\"100\" />\n\t\t\t\t\t</button>\n        </div>\n        <div class=\"modal__desc-wrap\">\n          <h2 class=\"modal-heading\">${title}</h2>\n          <div class=\"modal__rating-wrap\">\n            <ul class=\"modal__rating-left-list\">\n              <li class=\"modal__rating-left-item\">Vote / Votes</li>\n              <li class=\"modal__rating-left-item\">Popularity</li>\n              <li class=\"modal__rating-left-item\">Original Title</li>\n              <li class=\"modal__rating-left-item\">Genre</li>\n            </ul>\n            <ul class=\"modal__rating-right-list\">\n              <li class=\"modal__rating-right-item\">\n                <span class=\"modal__rating-right-item--color\">${vote}</span> /\n                <span class=\"modal__rating-right-item--shadow\">${votes}</span>\n              </li>\n              <li class=\"modal__rating-right-item\">${popularity}</li>\n              <li class=\"modal__rating-right-item modal__rating-right-item--uppercase\">${title}</li>\n              <li class=\"modal__rating-right-item\">${genre}</li>\n            </ul>\n          </div>\n          <div class=\"modal__content-wrap\">\n            <h4 class=\"modal__content-heading\">About</h4>\n            <p class=\"modal__content\">\n              ${about}\n            </p>\n          </div>\n          <div class=\"modal__button-wrap\" data-id=\"${id}\">\n            <button class=\"modal__button btn-watch\">add to Watched</button>\n            <button class=\"modal__button btn-queue modal__button--transparent\">\n              add to queue\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  `,\n      {\n        onShow: modal => {\n          window.addEventListener(\"keydown\", escapeKeyCloseModal);\n          window.addEventListener(\"click\", clickForCloseModal);\n          modal.element().querySelector(\".modal__close\").onclick = modal.close;\n        },\n        onClose: modal => {\n          window.removeEventListener(\"keydown\", escapeKeyCloseModal);\n          window.removeEventListener(\"click\", clickForCloseModal);\n        },\n      }\n    );\n\n    function escapeKeyCloseModal(event) {\n      if (event.code === \"Escape\") {\n        modal.close();\n      }\n    }\n\n    function clickForCloseModal(event) {\n      console.log(event.target.classList.value);\n      if (event.target.classList.value === \"basicLightbox__placeholder\") {\n        modal.close();\n      }\n    }\n\n    modal.show();\n  }\n\n  addListener();\n\n  // addWatched();\n\n  // addQueue();\n}\n","import filmCard from \"../../templates/library-films.hbs\";\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error(\"Get state error: \", error.message);\n  }\n};\n\n\nconst library = document.querySelector(\".js-films-list-library\");\nconst queueBtn = document.querySelector(\".library__queue-btn\");\nconst watchedBtn = document.querySelector(\".library__watched-btn\");\n\nqueueBtn.addEventListener(\"click\", onQueueBtnClick);\n\nfunction onQueueBtnClick(e) {\n  const loadQueue = load(\"allQueueMovies\");\n  appendFilm(loadQueue);\n}\n\nfunction appendFilm(films) {\n  const normalObjs = films.map(film => {\n    film.genre.length <= 3\n      ? (film.genre = film.genre.join(\", \"))\n      : (film.genre = [film.genre[0], film.genre[1], \"Other\"].join(\", \"));\n    return film;\n  });\n  library.innerHTML = \"\";\n  library.insertAdjacentHTML(\"beforeend\", filmCard(normalObjs));\n}\n","const libraryWatchedBtn = document.querySelector(\".library__watched-btn\");\nconst libraryQueueBtn = document.querySelector(\".library__queue-btn\");\n\nconst libraryBtnGroup = document.querySelector(\".button-group\");\n\nlibraryBtnGroup.addEventListener('click', onLibraryBtnsClick);\n\nfunction onLibraryBtnsClick (evt) {\n    if (evt.target.nodeName !== \"BUTTON\") {\n        return;\n    };\n\n    if (evt.target.classList.contains(\"library__watched-btn\")) {\n        libraryWatchedBtn.classList.add(\"is-active\");\n        libraryQueueBtn.classList.remove(\"is-active\");\n        return;\n      }\n    \n      if (evt.target.classList.contains(\"library__queue-btn\")) {\n        libraryWatchedBtn.classList.remove(\"is-active\");\n        libraryQueueBtn.classList.add(\"is-active\");\n        return;\n      }\n\n};\n\n\n\n\n"],"names":["parcelRequire","$f8bcdad7722f9f4c$export$2e2bcd8739ae039","$parcel$interopDefault","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","name","hash","loc","start","line","column","end","compiler","main","stack1","fn","program","inverse","noop","useData","$2b9cda6449d039ac$var$load","key","serializedState","localStorage","getItem","undefined","JSON","parse","error","console","message","$2b9cda6449d039ac$var$library","document","querySelector","$2b9cda6449d039ac$var$watchedBtn","window","addEventListener","$2b9cda6449d039ac$var$renderLibrary","$2b9cda6449d039ac$var$loadWatched","e","films","normalObjs","map","film","genre","length","join","innerHTML","insertAdjacentHTML","$2b9cda6449d039ac$var$appendFilm","log","IMG_URL","$2b9cda6449d039ac$var$IMG_URL","$gC8Yz","default","cardContainer","async","preventDefault","target","nodeName","id","Number","parentElement","dataset","allDetails","details","find","element","renderModal","img","title","popularity","vote","votes","about","modal1","$9B8F0","create","onShow","modal","escapeKeyCloseModal","clickForCloseModal","onclick","close","onClose","removeEventListener","event","code","classList","value","show","$cgPbV","addListener","$ea4023d5ab95b8f6$var$library","$ea4023d5ab95b8f6$var$queueBtn","$ea4023d5ab95b8f6$var$appendFilm","$ea4023d5ab95b8f6$var$load","$e000695665c21457$var$libraryWatchedBtn","$e000695665c21457$var$libraryQueueBtn","evt","contains","add","remove"],"version":3,"file":"library.4b8ea41f.js.map"}