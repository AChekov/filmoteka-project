!function(){function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},l={},a=n.parcelRequire37c5;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in l){var n=l[e];delete l[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,n){l[e]=n},n.parcelRequire37c5=a),a("7MDoz");var i=a("bpxeT"),o=a("2TvXO"),r=a("l5bVx"),c=e(a("WMajR")).template({1:function(n,t,l,a,i){var o,c=null!=t?t:n.nullContext||{},s=n.hooks.helperMissing,d="function",u=n.escapeExpression,m=n.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'  <li class="films__item" data-id='+u((void 0===(o=null!=(o=m(l,"id")||(null!=t?m(t,"id"):t))?o:s)?"undefined":e(r)(o))===d?o.call(c,{name:"id",hash:{},data:i,loc:{start:{line:2,column:34},end:{line:2,column:40}}}):o)+'>\n\n    <a href="" class="films__wrapper">\n      <div class="films__img-wrapper">\n        <img class="films__img" src="'+u((void 0===(o=null!=(o=m(l,"img")||(null!=t?m(t,"img"):t))?o:s)?"undefined":e(r)(o))===d?o.call(c,{name:"img",hash:{},data:i,loc:{start:{line:6,column:37},end:{line:6,column:44}}}):o)+'" alt="'+u((void 0===(o=null!=(o=m(l,"title")||(null!=t?m(t,"title"):t))?o:s)?"undefined":e(r)(o))===d?o.call(c,{name:"title",hash:{},data:i,loc:{start:{line:6,column:51},end:{line:6,column:60}}}):o)+'" loading="lazy" />\n      </div>\n\n      <div class="films__info">\n        <p class="films__name">'+u((void 0===(o=null!=(o=m(l,"title")||(null!=t?m(t,"title"):t))?o:s)?"undefined":e(r)(o))===d?o.call(c,{name:"title",hash:{},data:i,loc:{start:{line:10,column:31},end:{line:10,column:40}}}):o)+'</p>\n\n        <p class="films__description">\n          '+u((void 0===(o=null!=(o=m(l,"genre")||(null!=t?m(t,"genre"):t))?o:s)?"undefined":e(r)(o))===d?o.call(c,{name:"genre",hash:{},data:i,loc:{start:{line:13,column:10},end:{line:13,column:19}}}):o)+"\n          |\n          "+u((void 0===(o=null!=(o=m(l,"releaseDate")||(null!=t?m(t,"releaseDate"):t))?o:s)?"undefined":e(r)(o))===d?o.call(c,{name:"releaseDate",hash:{},data:i,loc:{start:{line:15,column:10},end:{line:15,column:25}}}):o)+'<span class="rating-on-library-card">'+u((void 0===(o=null!=(o=m(l,"vote")||(null!=t?m(t,"vote"):t))?o:s)?"undefined":e(r)(o))===d?o.call(c,{name:"vote",hash:{},data:i,loc:{start:{line:15,column:62},end:{line:15,column:70}}}):o)+"</span>\n        </p>\n      </div>\n    </a>\n    \n  </li>\n"},compiler:[8,">= 4.3.0"],main:function(e,n,t,l,a){var i;return null!=(i=(e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]})(t,"each").call(null!=n?n:e.nullContext||{},n,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:1,column:0},end:{line:21,column:9}}}))?i:""},useData:!0}),s=a("dyT35"),d=a("4x3lN"),u=a("j0bx3"),m=function(e){try{var n=localStorage.getItem(e);return null===n?void 0:JSON.parse(n)}catch(e){console.error("Get state error: ",e.message)}},_=document.querySelector(".js-films-list-library"),g=(document.querySelector(".library__queue-btn"),document.querySelector(".library__watched-btn"));window.addEventListener("load",v),g.addEventListener("click",v);var p=m("allWatchedMovies");function v(e){var n,t=m("allWatchedMovies");n=t.map((function(e){return e.genre.length<=3?e.genre=e.genre.join(", "):e.genre=[e.genre[0],e.genre[1],"Other"].join(", "),e})),_.innerHTML="",_.insertAdjacentHTML("beforeend",c(n))}console.log(p);d.default.IMG_URL;function f(){return(f=e(i)(e(o).mark((function n(t){var l,a,i,r,c,d,_;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_=function(e){var n=e.id,t=e.img,l=e.title,a=e.popularity,i=e.vote,o=e.votes,r=e.about,c=e.genre,d=s.create('\n    <div class="modal__container">\n      <div class="modal__close">\n        <div class="modal__close-first"></div>\n        <div class="modal__close-second"></div>\n      </div>\n      <div class="modal-wrap">\n        <div class="modal__picture-wrap">\n          <img\n          class="modal__picture"\n          src="'.concat(t,'"\n          alt="film-picture"\n          />\n          <button class="modal__button-play trailer-button" data-id="').concat(n,'">\n            <img class="modal__img-play" src="https://www.freepnglogos.com/uploads/play-button-png/play-button-file-youtube-play-buttom-icon-svg-wikimedia-commons-27.png" alt="play trailer" width="100" height="100" />\n\t\t\t\t\t</button>\n        </div>\n        <div class="modal__desc-wrap">\n          <h2 class="modal-heading">').concat(l,'</h2>\n          <div class="modal__rating-wrap">\n            <ul class="modal__rating-left-list">\n              <li class="modal__rating-left-item">Vote / Votes</li>\n              <li class="modal__rating-left-item">Popularity</li>\n              <li class="modal__rating-left-item">Original Title</li>\n              <li class="modal__rating-left-item">Genre</li>\n            </ul>\n            <ul class="modal__rating-right-list">\n              <li class="modal__rating-right-item">\n                <span class="modal__rating-right-item--color">').concat(i,'</span> /\n                <span class="modal__rating-right-item--shadow">').concat(o,'</span>\n              </li>\n              <li class="modal__rating-right-item">').concat(a,'</li>\n              <li class="modal__rating-right-item modal__rating-right-item--uppercase">').concat(l,'</li>\n              <li class="modal__rating-right-item">').concat(c,'</li>\n            </ul>\n          </div>\n          <div class="modal__content-wrap">\n            <h4 class="modal__content-heading">About</h4>\n            <p class="modal__content">\n              ').concat(r,'\n            </p>\n          </div>\n          <div class="modal__button-wrap" data-id="').concat(n,'">\n            <button class="modal__button btn-watch">add to Watched</button>\n            <button class="modal__button btn-queue modal__button--transparent">\n              add to queue\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  '),{onShow:function(e){window.addEventListener("keydown",u),window.addEventListener("click",m),e.element().querySelector(".modal__close").onclick=e.close},onClose:function(e){window.removeEventListener("keydown",u),window.removeEventListener("click",m)}});function u(e){"Escape"===e.code&&d.close()}function m(e){console.log(e.target.classList.value),"basicLightbox__placeholder"===e.target.classList.value&&d.close()}d.show()},t.preventDefault(),console.log(t.target),"DIV"!==t.target.nodeName&&"UL"!==t.target.nodeName&&("IMG"===t.target.nodeName&&(l=Number(t.target.parentElement.parentElement.parentElement.dataset.id),console.log(l),a=m("allWatchedMovies"),console.log(a),i=a.find((function(e){return e.id===l})),console.log(i),_(i)),"P"===t.target.nodeName&&(r=t.target.parentElement.parentElement.parentElement.dataset.id,c=m("allWatchedMovies"),d=c.find((function(e){return e.id===r})),console.log(d),_(d))),(0,u.addListener)();case 6:case"end":return e.stop()}}),n)})))).apply(this,arguments)}({cardContainer:document.querySelector(".films__container")}).cardContainer.addEventListener("click",(function(e){return f.apply(this,arguments)}));var h=document.querySelector(".js-films-list-library"),b=document.querySelector(".library__queue-btn");document.querySelector(".library__watched-btn");b.addEventListener("click",(function(e){n=function(e){try{var n=localStorage.getItem(e);return null===n?void 0:JSON.parse(n)}catch(e){console.error("Get state error: ",e.message)}}("allQueueMovies"),t=n.map((function(e){return e.genre.length<=3?e.genre=e.genre.join(", "):e.genre=[e.genre[0],e.genre[1],"Other"].join(", "),e})),h.innerHTML="",h.insertAdjacentHTML("beforeend",c(t));var n,t})),a("ak33M");var y=document.querySelector(".library__watched-btn"),w=document.querySelector(".library__queue-btn");document.querySelector(".button-group").addEventListener("click",(function(e){if("BUTTON"!==e.target.nodeName)return;if(e.target.classList.contains("library__watched-btn"))return y.classList.add("is-active"),void w.classList.remove("is-active");if(e.target.classList.contains("library__queue-btn"))return y.classList.remove("is-active"),void w.classList.add("is-active")}))}();
//# sourceMappingURL=library.cbf7fc9d.js.map
