{"mappings":"oeAGAA,EAAA,SCHA,IAAAC,EAAAD,EAAA,SAEA,MAUME,EAAUC,SAASC,cAAc,0BAEjCC,GADWF,SAASC,cAAc,uBACrBD,SAASC,cAAc,0BAK1C,SAASE,EAAcC,IAKvB,SAAoBC,GAClB,MAAMC,EAAaD,EAAME,KAAIC,IAC3BA,EAAKC,MAAMC,QAAU,EAChBF,EAAKC,MAAQD,EAAKC,MAAME,KAAK,MAC7BH,EAAKC,MAAQ,CAACD,EAAKC,MAAM,GAAID,EAAKC,MAAM,GAAI,SAASE,KAAK,MACxDH,KAETT,EAAQa,UAAY,GACpBb,EAAQc,mBAAmB,aAAa,EAAAf,EAAAgB,SAASR,IAXjDS,CAnBW,CAAAC,IACX,IACE,MAAMC,EAAkBC,aAAaC,QAAQH,GAC7C,OAA2B,OAApBC,OAA2BG,EAAYC,KAAKC,MAAML,GACzD,MAAOM,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,WAavBC,CAAK,qBAJ3BC,OAAOC,iBAAiB,OAAQzB,GAChCD,EAAW0B,iBAAiB,QAASzB,GCjBrCL,EAAAD,EAAA,SAEA,MAUMgC,EAAU7B,SAASC,cAAc,0BACjC6B,EAAW9B,SAASC,cAAc,uBACrBD,SAASC,cAAc,yBAE1C6B,EAASF,iBAAiB,SAE1B,SAAyBxB,IAKzB,SAAoBC,GAClB,MAAMC,EAAaD,EAAME,KAAIC,IAC3BA,EAAKC,MAAMC,QAAU,EAChBF,EAAKC,MAAQD,EAAKC,MAAME,KAAK,MAC7BH,EAAKC,MAAQ,CAACD,EAAKC,MAAM,GAAID,EAAKC,MAAM,GAAI,SAASE,KAAK,MACxDH,KAETqB,EAAQjB,UAAY,GACpBiB,EAAQhB,mBAAmB,aAAa,EAAAf,EAAAgB,SAASR,IAXjDyB,CAlBW,CAAAf,IACX,IACE,MAAMC,EAAkBC,aAAaC,QAAQH,GAC7C,OAA2B,OAApBC,OAA2BG,EAAYC,KAAKC,MAAML,GACzD,MAAOM,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,WAYzBO,CAAK,sB,WCnBzB,MAAMC,EAAoBjC,SAASC,cAAc,yBAC3CiC,EAAkBlC,SAASC,cAAc,uBAEvBD,SAASC,cAAc,iBAE/B2B,iBAAiB,SAEjC,SAA6BO,GACzB,GAA4B,WAAxBA,EAAIC,OAAOC,SACX,OAGJ,GAAIF,EAAIC,OAAOE,UAAUC,SAAS,wBAG9B,OAFAN,EAAkBK,UAAUE,IAAI,kBAChCN,EAAgBI,UAAUG,OAAO,aAInC,GAAIN,EAAIC,OAAOE,UAAUC,SAAS,sBAGhC,OAFAN,EAAkBK,UAAUG,OAAO,kBACnCP,EAAgBI,UAAUE,IAAI","sources":["src/library.js","src/js/js-partials/renderWatchedList.js","src/js/js-partials/renderQueueList.js","src/js/js-partials/onLibraryBtnsClick.js"],"sourcesContent":["// import './js/js-partials/API';\n// import './js/js-partials/appendFilmsMarkup';\n// import './js/js-partials/clearFilmsContainer';\nimport './js/js-partials/teamModal';\nimport './js/js-partials/renderWatchedList';\nimport './js/js-partials/renderQueueList';\n// import './js/js-partials/openModalFilm';\nimport './js/js-partials/loader';\nimport './js/js-partials//onLibraryBtnsClick';","import filmCard from \"../../templates/films.hbs\";\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error(\"Get state error: \", error.message);\n  }\n};\n\n\nconst library = document.querySelector(\".js-films-list-library\");\nconst queueBtn = document.querySelector(\".library__queue-btn\");\nconst watchedBtn = document.querySelector(\".library__watched-btn\");\n\nwindow.addEventListener(\"load\", renderLibrary);\nwatchedBtn.addEventListener(\"click\", renderLibrary);\n\nfunction renderLibrary(e) {\n  const loadWatched = load(\"allWatchedMovies\");\n  appendFilm(loadWatched);\n}\n\nfunction appendFilm(films) {\n  const normalObjs = films.map(film => {\n    film.genre.length <= 3\n      ? (film.genre = film.genre.join(\", \"))\n      : (film.genre = [film.genre[0], film.genre[1], \"Other\"].join(\", \"));\n    return film;\n  });\n  library.innerHTML = \"\";\n  library.insertAdjacentHTML(\"beforeend\", filmCard(normalObjs));\n}\n\n// --------РЕНДЕР МОДАЛКИ-------\n\n// import * as basicLightbox from \"basiclightbox\";\n// import settings from \"./settings\";\n// import { createConst, addWatched, addQueue } from \"./onButtonClick\";\n// import { normalizationMovieObj } from \"./normalization-obj\";\n// import { savedLocalInfo } from \"./onButtonClick\";\n// const { IMG_URL } = settings;\n\n// const ref = {\n//   cardContainer: document.querySelector(\".films__container\"),\n// };\n\n// ref.cardContainer.addEventListener(\"click\", onClickCard);\n\n// async function onClickCard(e) {\n//   e.preventDefault();\n\n//   // console.log(e.target);\n//   if (e.target.nodeName !== \"DIV\" && e.target.nodeName !== \"UL\") {\n//     if (e.target.nodeName === \"IMG\") {\n//       const id = e.target.parentElement.parentElement.parentElement.dataset.id;\n//       console.log(id);\n//       // console.log(e.target.parentElement.parentElement.parentElement);\n//       const details = load(\"allWatchedMovies\");\n//       renderModal(details);\n//     }\n//     if (e.target.nodeName === \"P\") {\n//       const id = e.target.parentElement.parentElement.parentElement.dataset.id;\n//       // console.log(e.target.parentElement.parentElement.parentElement);\n//       const details = load(\"allWatchedMovies\");\n//       renderModal(details);\n//     }\n//   }\n\n//   function renderModal({\n//     id,\n//     img,\n//     title,\n//     popularity,\n//     vote,\n//     votes,\n//     about,\n//     genre,\n//   }) {\n//     const modal = basicLightbox.create(\n//       `\n//     <div class=\"modal__container\">\n//       <div class=\"modal__close\">\n//         <div class=\"modal__close-first\"></div>\n//         <div class=\"modal__close-second\"></div>\n//       </div>\n//       <div class=\"modal-wrap\">\n//         <div class=\"modal__picture-wrap\">\n//           <img\n//           class=\"modal__picture\"\n//           src=\"${img}\"\n//           alt=\"film-picture\"\n//           />\n//           <button class=\"modal__button-play trailer-button\" data-id=\"${id}\">\n//             <img class=\"modal__img-play\" src=\"https://www.freepnglogos.com/uploads/play-button-png/play-button-file-youtube-play-buttom-icon-svg-wikimedia-commons-27.png\" alt=\"play trailer\" width=\"100\" height=\"100\" />\n// \t\t\t\t\t</button>\n//         </div>\n//         <div class=\"modal__desc-wrap\">\n//           <h2 class=\"modal-heading\">${title}</h2>\n//           <div class=\"modal__rating-wrap\">\n//             <ul class=\"modal__rating-left-list\">\n//               <li class=\"modal__rating-left-item\">Vote / Votes</li>\n//               <li class=\"modal__rating-left-item\">Popularity</li>\n//               <li class=\"modal__rating-left-item\">Original Title</li>\n//               <li class=\"modal__rating-left-item\">Genre</li>\n//             </ul>\n//             <ul class=\"modal__rating-right-list\">\n//               <li class=\"modal__rating-right-item\">\n//                 <span class=\"modal__rating-right-item--color\">${vote}</span> /\n//                 <span class=\"modal__rating-right-item--shadow\">${votes}</span>\n//               </li>\n//               <li class=\"modal__rating-right-item\">${popularity}</li>\n//               <li class=\"modal__rating-right-item modal__rating-right-item--uppercase\">${title}</li>\n//               <li class=\"modal__rating-right-item\">${genre}</li>\n//             </ul>\n//           </div>\n//           <div class=\"modal__content-wrap\">\n//             <h4 class=\"modal__content-heading\">About</h4>\n//             <p class=\"modal__content\">\n//               ${about}\n//             </p>\n//           </div>\n//           <div class=\"modal__button-wrap\" data-id=\"${id}\">\n//             <button class=\"modal__button btn-watch\">add to Watched</button>\n//             <button class=\"modal__button btn-queue modal__button--transparent\">\n//               add to queue\n//             </button>\n//           </div>\n//         </div>\n//       </div>\n//     </div>\n//   `,\n//       {\n//         onShow: modal => {\n//           window.addEventListener(\"keydown\", escapeKeyCloseModal);\n//           window.addEventListener(\"click\", clickForCloseModal);\n//           modal.element().querySelector(\".modal__close\").onclick = modal.close;\n//         },\n//         onClose: modal => {\n//           window.removeEventListener(\"keydown\", escapeKeyCloseModal);\n//           window.removeEventListener(\"click\", clickForCloseModal);\n//         },\n//       }\n//     );\n\n//     function escapeKeyCloseModal(event) {\n//       if (event.code === \"Escape\") {\n//         modal.close();\n//       }\n//     }\n\n//     function clickForCloseModal(event) {\n//       console.log(event.target.classList.value);\n//       if (event.target.classList.value === \"basicLightbox__placeholder\") {\n//         modal.close();\n//       }\n//     }\n\n//     modal.show();\n//   }\n\n//   addListener();\n\n//   addWatched();\n\n//   addQueue();\n// }\n","import filmCard from \"../../templates/films.hbs\";\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error(\"Get state error: \", error.message);\n  }\n};\n\n\nconst library = document.querySelector(\".js-films-list-library\");\nconst queueBtn = document.querySelector(\".library__queue-btn\");\nconst watchedBtn = document.querySelector(\".library__watched-btn\");\n\nqueueBtn.addEventListener(\"click\", onQueueBtnClick);\n\nfunction onQueueBtnClick(e) {\n  const loadQueue = load(\"allQueueMovies\");\n  appendFilm(loadQueue);\n}\n\nfunction appendFilm(films) {\n  const normalObjs = films.map(film => {\n    film.genre.length <= 3\n      ? (film.genre = film.genre.join(\", \"))\n      : (film.genre = [film.genre[0], film.genre[1], \"Other\"].join(\", \"));\n    return film;\n  });\n  library.innerHTML = \"\";\n  library.insertAdjacentHTML(\"beforeend\", filmCard(normalObjs));\n}\n","const libraryWatchedBtn = document.querySelector(\".library__watched-btn\");\nconst libraryQueueBtn = document.querySelector(\".library__queue-btn\");\n\nconst libraryBtnGroup = document.querySelector(\".button-group\");\n\nlibraryBtnGroup.addEventListener('click', onLibraryBtnsClick);\n\nfunction onLibraryBtnsClick (evt) {\n    if (evt.target.nodeName !== \"BUTTON\") {\n        return;\n    };\n\n    if (evt.target.classList.contains(\"library__watched-btn\")) {\n        libraryWatchedBtn.classList.add(\"is-active\");\n        libraryQueueBtn.classList.remove(\"is-active\");\n        return;\n      }\n    \n      if (evt.target.classList.contains(\"library__queue-btn\")) {\n        libraryWatchedBtn.classList.remove(\"is-active\");\n        libraryQueueBtn.classList.add(\"is-active\");\n        return;\n      }\n\n};\n\n\n\n\n"],"names":["parcelRequire","$5kteQ","$2b9cda6449d039ac$var$library","document","querySelector","$2b9cda6449d039ac$var$watchedBtn","$2b9cda6449d039ac$var$renderLibrary","e","films","normalObjs","map","film","genre","length","join","innerHTML","insertAdjacentHTML","default","$2b9cda6449d039ac$var$appendFilm","key","serializedState","localStorage","getItem","undefined","JSON","parse","error","console","message","$2b9cda6449d039ac$var$load","window","addEventListener","$ea4023d5ab95b8f6$var$library","$ea4023d5ab95b8f6$var$queueBtn","$ea4023d5ab95b8f6$var$appendFilm","$ea4023d5ab95b8f6$var$load","$e000695665c21457$var$libraryWatchedBtn","$e000695665c21457$var$libraryQueueBtn","evt","target","nodeName","classList","contains","add","remove"],"version":3,"file":"library.35f9870a.js.map"}