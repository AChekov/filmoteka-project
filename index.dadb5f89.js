function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},i=t.parcelRequire37c5;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},t.parcelRequire37c5=i),i("kyEFX").register(JSON.parse('{"5ZPII":"index.dadb5f89.js","9cBl5":"noImageAvailable.4bf2d6d5.jpg","b9auz":"index.44bba2c0.js"}'));var o={API_KEY:"7cb8097836a7a1f4e5c19953961668c8",BASE_URL:"https://api.themoviedb.org/3",IMG_URL:"https://image.tmdb.org/t/p/w500/"},r=i("iiPHV");const{API_KEY:l,BASE_URL:s}=o,c=`${s}/search/movie?api_key=${l}&include_adult=false`;class u{fetchMoviesySearch(){return(0,r.default)(),fetch(`${c}&query=${this.searchQuery}&language=${this.language}&page=${this.currentPage}`).then((e=>e.json())).finally(r.default)}async fetchPopular(){(0,r.default)();const e=`${s}/trending/movie/day?api_key=${l}&page=${this.currentPage}`;return fetch(e).then((e=>e.json())).finally(r.default)}async getMovieDetails(e){(0,r.default)();return fetch(`${s}/movie/${e}?api_key=${l}`).then((e=>e.json())).finally(r.default)}async fetchById(){(0,r.default)();const e=await fetch(`${s}/movie/${this.movieId}?api_key=${l}`);return await e.json().finally(r.default)}async fetchTrailer(e){(0,r.default)();const t=await fetch(`${s}/movie/${e}/videos?api_key=${l}`);return await t.json()}getMoviedId(e){this.movieId=e}getItemFromLS(e){return localStorage.getItem(e)}addMovie(e,t){let n=JSON.parse(this.getItemFromLS(t));return null===n&&(n=[]),n.push(e),localStorage.setItem(t,JSON.stringify(n))}deleteMovie(e){let t=JSON.parse(this.getItemFromLS(e));const n=t.filter((e=>e.id!==Number(this.movieId)));return t=n,localStorage.setItem(e,JSON.stringify(t))}incrementPage(){this.page+=1}resetPage(){this.page=1}get query(){return this.searchQuery}set query(e){this.searchQuery=e}get page(){return this.currentPage}set page(e){this.currentPage=e}constructor(){this.searchQuery="",this.currentPage=1,this.language="en-US",this.genres="",this.movieId=0}}var d=e(i("amrNH")).template({1:function(e,t,n,a,i){var o,r=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,s="function",c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <li class="films__item" data-id='+c(typeof(o=null!=(o=u(n,"id")||(null!=t?u(t,"id"):t))?o:l)===s?o.call(r,{name:"id",hash:{},data:i,loc:{start:{line:2,column:34},end:{line:2,column:40}}}):o)+'>\n\n    <a href="" class="films__wrapper">\n      <div class="films__img-wrapper">\n        <img class="films__img" src="'+c(typeof(o=null!=(o=u(n,"img")||(null!=t?u(t,"img"):t))?o:l)===s?o.call(r,{name:"img",hash:{},data:i,loc:{start:{line:6,column:37},end:{line:6,column:44}}}):o)+'" alt="'+c(typeof(o=null!=(o=u(n,"title")||(null!=t?u(t,"title"):t))?o:l)===s?o.call(r,{name:"title",hash:{},data:i,loc:{start:{line:6,column:51},end:{line:6,column:60}}}):o)+'" loading="lazy" />\n      </div>\n\n      <div class="films__info">\n        <p class="films__name">'+c(typeof(o=null!=(o=u(n,"title")||(null!=t?u(t,"title"):t))?o:l)===s?o.call(r,{name:"title",hash:{},data:i,loc:{start:{line:10,column:31},end:{line:10,column:40}}}):o)+'</p>\n\n        <p class="films__description">\n          '+c(typeof(o=null!=(o=u(n,"genre")||(null!=t?u(t,"genre"):t))?o:l)===s?o.call(r,{name:"genre",hash:{},data:i,loc:{start:{line:13,column:10},end:{line:13,column:19}}}):o)+"\n          |\n          "+c(typeof(o=null!=(o=u(n,"releaseDate")||(null!=t?u(t,"releaseDate"):t))?o:l)===s?o.call(r,{name:"releaseDate",hash:{},data:i,loc:{start:{line:15,column:10},end:{line:15,column:25}}}):o)+'\n        </p>\n      </div>\n    </a>\n\n    <div class="trailer-button">\n      <a href="#" class="video-play-btn" aria-label="watch trailer"></a>\n    </div>\n\n  </li>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var o;return null!=(o=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:0},end:{line:25,column:9}}}))?o:""},useData:!0}),m={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};[1,2,3,4,5,6,7].slice(0,4);var f;f=new URL(i("kyEFX").resolve("9cBl5"),import.meta.url).toString();const{API_KEY:g,BASE_URL:p,IMG_URL:h}=o,y=e=>e.map((e=>m[`${e}`])),v=e=>e.map((e=>e.name)),_=({genres:t=null,genre_ids:n=null,id:a,original_title:i,overview:o,popularity:r,poster_path:l,release_date:s,vote_average:c,vote_count:u})=>{return{genre:n?y(n):v(t),id:a,title:i,about:o,popularity:r,img:(m=l,m?`${h}${m}`:`${e(f)}`),releaseDate:s?(d=s,d?d.slice(0,4):data):"",vote:c,votes:u};var d,m};function b(e,t){const n=e.map((e=>{let t=_(e);return t.genre.length<=3?t.genre=t.genre.join(", "):t.genre=[t.genre[0],t.genre[1],"Other"].join(", "),t}));t.insertAdjacentHTML("beforeend",d(n))}const w=document.querySelector(".js-films-list-index");function S(){w.innerHTML=""}const L=document.querySelector(".search-span");function q(e,t){const n=`View the trending list for the day, page ${t}`,a=`View the list by keywords "${e}", page ${t}`;L.innerHTML=""===e?n:a}const $=new u,T={arrowLeft:document.querySelector("button[aria-label='previous-page'"),arrowRight:document.querySelector("button[aria-label='next-page'"),pagination:document.querySelector(".pagination"),firstButton:document.querySelector(".firstButton-and-threeDots"),lastButton:document.querySelector(".lastButton-and-threeDots"),filmsContainerIndex:document.querySelector(".js-films-list-index"),inputError:document.querySelector(".input__error"),searchSpan:document.querySelector(".search-span")};let E,M=1;function I(e,t){if(M>E)return;M=e,E=t;let n=M-2,a=M+2;M!==E&&M+1!==E||(n=M-3,a=E),M+3===E&&(a=E),n<3&&(n=1,a=5),E<=5&&(n=M,a=E);for(let e=n;e<=a;e+=1)if(e===M){const t=`<button id="paginationButton" data-page="${e}" class="button-page paginationButton active">${e}</button>`;T.pagination.insertAdjacentHTML("beforeend",t)}else{const t=`<button id="paginationButton" data-page="${e}" class="button-page paginationButton">${e}</button>`;T.pagination.insertAdjacentHTML("beforeend",t)}if(n>=3){if(N())return;!function(){const e='<button id="paginationButton" data-page="1" class="button-page paginationButton">1</button>',t="<span class='page-buttons__first-points'>···</span>";T.firstButton.insertAdjacentHTML("beforeend",e),T.firstButton.insertAdjacentHTML("beforeend",t)}()}if(n<3&&N()&&(T.firstButton.innerHTML=""),M===E||M+1===E||M+2===E||M+3===E)return T.lastButton.innerHTML="",void(T.lastButton.style.marginRight=0);null===document.querySelector(".page-buttons__last-points")&&(!function(e){const t=`<button id="paginationButton" data-page="${e}" class="button-page paginationButton">${e}</button>`,n="<span class='page-buttons__last-points'>···</span>";T.lastButton.insertAdjacentHTML("beforeend",n),T.lastButton.insertAdjacentHTML("beforeend",t),T.lastButton.style.marginRight="10px"}(E),T.arrowLeft.onclick=k,T.arrowRight.onclick=x,T.pagination.onclick=O,T.firstButton.onclick=j,T.lastButton.onclick=B)}function j(e){"BUTTON"===e.target.nodeName&&(M=1,P($.query,M))}function B(e){"BUTTON"===e.target.nodeName&&(M=E,P($.query,M))}function k(){1!==M&&(M-=1,P($.query,M))}function x(){M!==E&&(M+=1,P($.query,M))}function H(){T.pagination.innerHTML="",T.firstButton.innerHTML="",T.lastButton.innerHTML=""}function O(e){e.preventDefault(),e.target!==e.currentTarget&&(M=Number(e.target.dataset.page),P($.query,M))}function N(){return null!==document.querySelector(".page-buttons__first-points")}function P(e,t){if(""===e)return q(e,t),M=t,$.page=M,$.query="",sessionStorage.setItem("query",$.query),sessionStorage.setItem("page",M),$.fetchPopular().then((({results:e,total_pages:t})=>{S(),b(e,T.filmsContainerIndex),H(),I($.page,t)})),void A();q(e,t),function(e,t){$.query=e,$.page=t,sessionStorage.setItem("query",e),sessionStorage.setItem("page",t),$.fetchMoviesySearch().then((({results:e,total_pages:t})=>{0!==e.length?(S(),b(e,T.filmsContainerIndex),H(),I($.page,t)):T.inputError.textContent="Search result not successful. Enter the correct movie name and smile : )"}))}(e,t),A()}function A(){window.scrollTo(pageXOffset,0)}new u,document.querySelector(".js-films-list-index");const D=document.querySelector(".logo");window.addEventListener("load",(function(){let e=sessionStorage.getItem("query"),t=sessionStorage.getItem("page");null===e&&(e="");null===t&&(t=1);P(e,Number(t))})),D.addEventListener("click",(function(e){e.preventDefault();P("",1)}));var R=/^\s+|\s+$/g,C=/^[-+]0x[0-9a-f]+$/i,F=/^0b[01]+$/i,U=/^0o[0-7]+$/i,Q=parseInt,V="object"==typeof t&&t&&t.Object===Object&&t,W="object"==typeof self&&self&&self.Object===Object&&self,J=V||W||Function("return this")(),G=Object.prototype.toString,Y=Math.max,K=Math.min,X=function(){return J.Date.now()};function z(e,t,n){var a,i,o,r,l,s,c=0,u=!1,d=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var n=a,o=i;return a=i=void 0,c=t,r=e.apply(o,n)}function g(e){return c=e,l=setTimeout(h,t),u?f(e):r}function p(e){var n=e-s;return void 0===s||n>=t||n<0||d&&e-c>=o}function h(){var e=X();if(p(e))return y(e);l=setTimeout(h,function(e){var n=t-(e-s);return d?K(n,o-(e-c)):n}(e))}function y(e){return l=void 0,m&&a?f(e):(a=i=void 0,r)}function v(){var e=X(),n=p(e);if(a=arguments,i=this,s=e,n){if(void 0===l)return g(s);if(d)return l=setTimeout(h,t),f(s)}return void 0===l&&(l=setTimeout(h,t)),r}return t=ee(t)||0,Z(n)&&(u=!!n.leading,o=(d="maxWait"in n)?Y(ee(n.maxWait)||0,t):o,m="trailing"in n?!!n.trailing:m),v.cancel=function(){void 0!==l&&clearTimeout(l),c=0,a=s=i=l=void 0},v.flush=function(){return void 0===l?r:y(X())},v}function Z(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function ee(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==G.call(e)}(e))return NaN;if(Z(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Z(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(R,"");var n=F.test(e);return n||U.test(e)?Q(e.slice(2),n?2:8):C.test(e)?NaN:+e}const te=new u,ne=document.querySelector(".input__wraper"),ae=document.querySelector(".input__error");document.querySelector(".js-films-list-index");ne.addEventListener("submit",(function(e){if(e.preventDefault(),te.query=e.currentTarget.searchQuery.value.trim(),ae.textContent=" ",te.resetPage(),!te.query)return void(ae.textContent="Please enter something to search ");P(te.query,te.page)})),i("jxohN");let ie={};const oe=[],re=[],le=(e,t)=>{try{const n=JSON.stringify(t);localStorage.setItem(e,n)}catch(e){console.error("Set state error: ",e.message)}},se=e=>{try{const t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}};function ce(e){const t=document.querySelector(".btn-watch.is-active");e.currentTarget.classList.toggle("is-active");const n=se("allWatchedMovies");if(t){let e;n.forEach((({id:t},n)=>t===ie.id?e=n:n)),oe.splice(e,1),le("allWatchedMovies",oe)}!!n&&n.find((({id:e})=>e===ie.id))||(oe.push(ie),le("allWatchedMovies",oe))}function ue(e){const t=document.querySelector(".btn-queue.is-active");e.currentTarget.classList.toggle("is-active");const n=se("allQueueMovies");if(t){let t;e.currentTarget.textContent="add to Queue",n.forEach((({id:e},n)=>e===ie.id?t=n:n)),re.splice(t,1),le("allQueueMovies",re)}!!n&&n.find((({id:e})=>e===ie.id))||(re.push(ie),le("allQueueMovies",re))}var de=i("9B8F0");const me=new u,fe=document.querySelector(".trailer__window"),ge=document.querySelector(".trailer__backdrop");function pe(e){const t=e.currentTarget.dataset.id;me.fetchTrailer(t).then((({results:e})=>{e.forEach((e=>{if("Official Trailer"===e.name){console.log(e.key);document.querySelector(".basicLightbox .modal__container").classList.add("visually-hidden"),t=e.key,console.log(t),ge.classList.remove("visually-hidden"),fe.innerHTML=`\n  <iframe class="trailer__iframe" width="700" height="500" src="https://www.youtube.com/embed/${t}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>\n  `,ge.addEventListener("click",(e=>{e.target===ge&&he()}))}var t}))}))}function he(){document.querySelector(".basicLightbox .modal__container").classList.remove("visually-hidden"),ge.classList.add("visually-hidden"),fe.innerHTML=""}ge.addEventListener("click",(e=>{e.target===ge&&he()}));const{IMG_URL:ye}=o,ve=new u;async function _e(e){const t=await ve.getMovieDetails(e).then((e=>e)),n=_(t);return ie=n,n}({cardContainer:document.querySelector(".films__container")}).cardContainer.addEventListener("click",(async function(e){if(e.preventDefault(),"DIV"!==e.target.nodeName&&"UL"!==e.target.nodeName){if("IMG"===e.target.nodeName){const n=e.target.parentElement.parentElement.parentElement.dataset.id;t(await _e(n))}if("P"===e.target.nodeName){const n=e.target.parentElement.parentElement.parentElement.dataset.id;t(await _e(n))}}function t({id:e,img:t,title:n,popularity:a,vote:i,votes:o,about:r,genre:l}){const s=de.create(`\n    <div class="modal__container">\n      <div class="modal__close">\n        <div class="modal__close-first"></div>\n        <div class="modal__close-second"></div>\n      </div>\n      <div class="modal-wrap">\n        <div class="modal__picture-wrap">\n          <img\n          class="modal__picture"\n          src="${t}"\n          alt="film-picture"\n          />\n          <button class="modal__button-play trailer-button" data-id="${e}">\n            <img class="modal__img-play" src="https://www.freepnglogos.com/uploads/play-button-png/play-button-file-youtube-play-buttom-icon-svg-wikimedia-commons-27.png" alt="play trailer" width="100" height="100" />\n\t\t\t\t\t</button>\n        </div>\n        <div class="modal__desc-wrap">\n          <h2 class="modal-heading">${n}</h2>\n          <div class="modal__rating-wrap">\n            <ul class="modal__rating-left-list">\n              <li class="modal__rating-left-item">Vote / Votes</li>\n              <li class="modal__rating-left-item">Popularity</li>\n              <li class="modal__rating-left-item">Original Title</li>\n              <li class="modal__rating-left-item">Genre</li>\n            </ul>\n            <ul class="modal__rating-right-list">\n              <li class="modal__rating-right-item">\n                <span class="modal__rating-right-item--color">${i}</span> /\n                <span class="modal__rating-right-item--shadow">${o}</span>\n              </li>\n              <li class="modal__rating-right-item">${a}</li>\n              <li class="modal__rating-right-item modal__rating-right-item--uppercase">${n}</li>\n              <li class="modal__rating-right-item">${l}</li>\n            </ul>\n          </div>\n          <div class="modal__content-wrap">\n            <h4 class="modal__content-heading">About</h4>\n            <p class="modal__content">\n              ${r}\n            </p>\n          </div>\n          <div class="modal__button-wrap" data-id="${e}">\n            <button class="modal__button btn-watch">add to Watched</button>\n            <button class="modal__button btn-queue">add to queue</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  `,{onShow:e=>{window.addEventListener("keydown",c),window.addEventListener("click",u),e.element().querySelector(".modal__close").onclick=e.close},onClose:e=>{window.removeEventListener("keydown",c),window.removeEventListener("click",u)}});function c(e){"Escape"===e.code&&s.close()}function u(e){console.log(e.target.classList.value),"basicLightbox__placeholder"===e.target.classList.value&&s.close()}s.show()}document.querySelector(".modal__button-play").addEventListener("click",pe),document.querySelector(".btn-watch").addEventListener("click",ce),document.querySelector(".btn-queue").addEventListener("click",ue)})),i("iiPHV");
//# sourceMappingURL=index.dadb5f89.js.map
