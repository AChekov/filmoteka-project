{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-f9549f0e4a78d48b.js","src/js/js-partials/settings.js","src/js/js-partials/API.js","src/templates/films.hbs","src/js/js-partials/genreList.js","node_modules/@parcel/runtime-js/lib/runtime-af39279677c734f7.js","src/js/js-partials/normalization-obj.js","src/js/js-partials/appendFilmsMarkup.js","src/js/js-partials/clearFilmsContainer.js","src/js/js-partials/searchSpan.js","src/js/js-partials/pagination.js","src/js/js-partials/loadPage.js","node_modules/lodash.throttle/index.js","src/js/js-partials/onSearch.js","src/js/js-partials/onButtonClick.js","src/js/js-partials/openModalFilm.js","src/js/js-partials/trailer.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"5ZPII\\\":\\\"index.dadb5f89.js\\\",\\\"9cBl5\\\":\\\"noImageAvailable.4bf2d6d5.jpg\\\",\\\"b9auz\\\":\\\"index.44bba2c0.js\\\"}\"));","const settings = {\n  API_KEY: \"7cb8097836a7a1f4e5c19953961668c8\",\n  BASE_URL: \"https://api.themoviedb.org/3\",\n  IMG_URL: \"https://image.tmdb.org/t/p/w500/\",\n};\nexport default settings;\n","import settings from \"./settings\";\nimport loaderToggle from './loader';\nconst { API_KEY, BASE_URL } = settings;\n\nconst VIDEO_BY_SEACH = `${BASE_URL}/search/movie?api_key=${API_KEY}&include_adult=false`;\n\nexport default class MovieApiService {\n  constructor() {\n    this.searchQuery = \"\";\n    this.currentPage = 1;\n    this.language = \"en-US\";\n    this.genres = \"\";\n    this.movieId = 0;\n  }\n\n  // ======== search films =========\n\n  fetchMoviesySearch() {\n    loaderToggle();\n    return fetch(\n      `${VIDEO_BY_SEACH}&query=${this.searchQuery}&language=${this.language}&page=${this.currentPage}`\n    ).then(responce => responce.json()).finally(loaderToggle);\n    \n  }\n\n  async fetchPopular() {\n     loaderToggle();\n    const urlPopular = `${BASE_URL}/trending/movie/day?api_key=${API_KEY}&page=${this.currentPage}`;\n    return fetch(urlPopular).then(responce => responce.json()).finally(loaderToggle);\n  }\n\n  async getMovieDetails(id) {\n    loaderToggle();\n    const url = `${BASE_URL}/movie/${id}?api_key=${API_KEY}`;\n    return fetch(url).then(res => res.json()).finally(loaderToggle);\n  }\n\n  async fetchById() {\n    loaderToggle();\n    const responce = await fetch(\n      `${BASE_URL}/movie/${this.movieId}?api_key=${API_KEY}`\n    );\n    const data = await responce.json().finally(loaderToggle);\n    return data;\n  }\n\n  async fetchTrailer(id) {\n    loaderToggle();\n    const responce = await fetch(\n      `${BASE_URL}/movie/${id}/videos?api_key=${API_KEY}`\n    );\n    const data = await responce.json();\n   \n    return data;\n     loaderToggle();\n  }\n\n  getMoviedId(newId) {\n    this.movieId = newId;\n  }\n\n  getItemFromLS(key) {\n    return localStorage.getItem(key);\n  }\n\n  addMovie(movieObj, key) {\n    let existingEntries = JSON.parse(this.getItemFromLS(key));\n    if (existingEntries === null) existingEntries = [];\n    existingEntries.push(movieObj);\n    return localStorage.setItem(key, JSON.stringify(existingEntries));\n  }\n\n  deleteMovie(key) {\n    let existingEntries = JSON.parse(this.getItemFromLS(key));\n    const newEntries = existingEntries.filter(\n      el => el.id !== Number(this.movieId)\n    );\n    existingEntries = newEntries;\n\n    return localStorage.setItem(key, JSON.stringify(existingEntries));\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n\n  get page() {\n    return this.currentPage;\n  }\n\n  set page(page) {\n    this.currentPage = page;\n  }\n}\n","{{#each this}}\n  <li class=\"films__item\" data-id={{id}}>\n\n    <a href=\"\" class=\"films__wrapper\">\n      <div class=\"films__img-wrapper\">\n        <img class=\"films__img\" src=\"{{img}}\" alt=\"{{title}}\" loading=\"lazy\" />\n      </div>\n\n      <div class=\"films__info\">\n        <p class=\"films__name\">{{title}}</p>\n\n        <p class=\"films__description\">\n          {{genre}}\n          |\n          {{releaseDate}}\n        </p>\n      </div>\n    </a>\n\n    <div class=\"trailer-button\">\n      <a href=\"#\" class=\"video-play-btn\" aria-label=\"watch trailer\"></a>\n    </div>\n\n  </li>\n{{/each}}","export default {\n  28: \"Action\",\n  12: \"Adventure\",\n  16: \"Animation\",\n  35: \"Comedy\",\n  80: \"Crime\",\n  99: \"Documentary\",\n  18: \"Drama\",\n  10751: \"Family\",\n  14: \"Fantasy\",\n  36: \"History\",\n  27: \"Horror\",\n  10402: \"Music\",\n  9648: \"Mystery\",\n  10749: \"Romance\",\n  878: \"Science Fiction\",\n  10770: \"TV Movie\",\n  53: \"Thriller\",\n  10752: \"War\",\n  37: \"Western\",\n};\nconst arr = [1, 2, 3, 4, 5, 6, 7].slice(0, 4);\n\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"9cBl5\")).toString();","import genreList from \"./genreList\";\nimport settings from \"./settings\";\nconst { API_KEY, BASE_URL, IMG_URL } = settings;\nimport noImg from \"../../images/noImageAvailable.jpg\";\n\nconst getGenreArray = genre_ids => genre_ids.map(el => genreList[`${el}`]);\n\nconst getGenreArrayLibrary = genres => genres.map(el => el.name);\n\nexport const getImgPath = imgPath =>\n  !imgPath ? `${noImg}` : `${IMG_URL}${imgPath}`;\n\nconst getDate = date => (!date ? data : date.slice(0, 4));\n\n// -------------------------------------------------------------\nexport const normalizationMovieObj = ({\n  genres = null,\n  genre_ids = null,\n  id,\n  original_title,\n  overview,\n  popularity,\n  poster_path,\n  release_date,\n  vote_average,\n  vote_count,\n}) => ({\n  genre: genre_ids ? getGenreArray(genre_ids) : getGenreArrayLibrary(genres),\n  id: id,\n  title: original_title,\n  about: overview,\n  popularity: popularity,\n  img: getImgPath(poster_path),\n  releaseDate: release_date ? getDate(release_date) : \"\",\n  vote: vote_average,\n  votes: vote_count,\n});\n","// import filmCard from '../../templates/films.hbs';\n\n// const galleryRef = document.querySelector('.films__container');\n\n// export default function appendFilmsMarkup(films) {\n//   galleryRef.insertAdjacentHTML('beforeend', filmCard(films));\n// }\n\nimport filmCard from \"../../templates/films.hbs\";\nimport { normalizationMovieObj } from \"./normalization-obj\";\n\n\nexport default function appendFilmsMarkup(films, page) {\n  \n  const normalObjs = films.map(element => {\n    let temp = normalizationMovieObj(element);\n    temp.genre.length <= 3\n      ? (temp.genre = temp.genre.join(\", \"))\n      : (temp.genre = [temp.genre[0], temp.genre[1], \"Other\"].join(\", \"));\n    return temp;\n  });\n  page.insertAdjacentHTML(\"beforeend\", filmCard(normalObjs));\n}\n","const listRef = document.querySelector('.js-films-list-index');\n\nexport default function clearFilmsContainer() {\n  listRef.innerHTML = '';\n}","const onSearchSpan = document.querySelector(\".search-span\");\n\nexport function dispaySpan(query, page) {\n  const popularFilmsSpan = `View the trending list for the day, page ${page}`;\n  const onSearchFilmsSpan = `View the list by keywords \"${query}\", page ${page}`;\n  if (query === \"\") {\n    onSearchSpan.innerHTML = popularFilmsSpan;\n  } else {\n    onSearchSpan.innerHTML = onSearchFilmsSpan;\n  }\n}\n","import appendFilmsMarkup from \"./appendFilmsMarkup\";\nimport clearFilmsContainer from \"./clearFilmsContainer\";\nimport MovieApiService from \"./API\";\nimport { dispaySpan } from \"./searchSpan\";\n\nconst apiService = new MovieApiService();\n\nconst refs = {\n  arrowLeft: document.querySelector(\"button[aria-label='previous-page'\"),\n  arrowRight: document.querySelector(\"button[aria-label='next-page'\"),\n  pagination: document.querySelector(\".pagination\"),\n  firstButton: document.querySelector(\".firstButton-and-threeDots\"),\n  lastButton: document.querySelector(\".lastButton-and-threeDots\"),\n  filmsContainerIndex: document.querySelector(\".js-films-list-index\"),\n  inputError: document.querySelector(\".input__error\"),\n  searchSpan: document.querySelector(\".search-span\"),\n};\n\nlet page = 1;\nlet totalPages;\n\nfunction renderButtons(currentPage, pages) {\n  //проверка, чтобы не рендерить кнопки больше, чем есть от бекенда\n  if (page > totalPages) return;\n\n  page = currentPage;\n  totalPages = pages;\n\n  let beforeActivePage = page - 2;\n  let afterActivePage = page + 2;\n\n  //рендер, если активная кнопка среди последних\n  if (page === totalPages || page + 1 === totalPages) {\n    beforeActivePage = page - 3;\n    afterActivePage = totalPages;\n  }\n\n  //частный случай, который не попадает ни в одно из условий, которые есть в этом файле\n  //(охренеть просто)\n\n  if (page + 3 === totalPages) {\n    afterActivePage = totalPages;\n  }\n\n  //Если активная кнопка меньше 5, рендерим 5 кнопок\n  // Заодно избегаем попадания переменной beforeActivePage в минуса\n  if (beforeActivePage < 3) {\n    beforeActivePage = 1;\n    afterActivePage = 5;\n  }\n  //Проверка, что страниц не меньше 5. Если меньше - рендерим нужное количество\n  if (totalPages <= 5) {\n    beforeActivePage = page;\n    afterActivePage = totalPages;\n  }\n\n  for (let i = beforeActivePage; i <= afterActivePage; i += 1) {\n    if (i === page) {\n      const pageButton = `<button id=\"paginationButton\" data-page=\"${i}\" class=\"button-page paginationButton active\">${i}</button>`;\n      refs.pagination.insertAdjacentHTML(\"beforeend\", pageButton);\n    } else {\n      const pageButton = `<button id=\"paginationButton\" data-page=\"${i}\" class=\"button-page paginationButton\">${i}</button>`;\n      refs.pagination.insertAdjacentHTML(\"beforeend\", pageButton);\n    }\n  }\n\n  // рендер первой кнопки с точками\n  if (beforeActivePage >= 3) {\n    if (isFirstThreeDots()) {\n      return;\n    } else {\n      renderFirstButtonAndDots();\n    }\n  }\n\n  //Убираем точки и первую кнопку, если активная кнопка меньше 5 и точки существуют\n  if (beforeActivePage < 3 && isFirstThreeDots()) {\n    refs.firstButton.innerHTML = \"\";\n  }\n\n  //Долго высчитывал. Убираем последнюю кнопку и точки, если\n  //активная страница среди последних и точки существуют\n  //Если предыдущие условия не проканали, наоборот точки и последнюю кнопку рендер\n  if (\n    page === totalPages ||\n    page + 1 === totalPages ||\n    page + 2 === totalPages ||\n    page + 3 === totalPages\n  ) {\n    refs.lastButton.innerHTML = \"\";\n    refs.lastButton.style.marginRight = 0;\n\n    return;\n  } else if (isLastThreeDots()) {\n    return;\n  } else {\n    renderLastButtonAndDots(totalPages);\n  }\n\n  //удобная замена для слушателей\n  refs.arrowLeft.onclick = onClickArrowLeft;\n  refs.arrowRight.onclick = onClickArrowRight;\n  refs.pagination.onclick = onClickButton;\n  refs.firstButton.onclick = onClickFirstButton;\n  refs.lastButton.onclick = onClickLastButton;\n}\n\nfunction onClickFirstButton(event) {\n  if (event.target.nodeName === \"BUTTON\") {\n    page = 1;\n\n    isQueryOrPopular(apiService.query, page);\n  }\n}\n\nfunction onClickLastButton(event) {\n  if (event.target.nodeName === \"BUTTON\") {\n    page = totalPages;\n\n    isQueryOrPopular(apiService.query, page);\n  }\n}\n\nfunction onClickArrowLeft() {\n  if (page === 1) return;\n  page -= 1;\n  isQueryOrPopular(apiService.query, page);\n}\n\nfunction onClickArrowRight() {\n  if (page === totalPages) return;\n\n  page += 1;\n  isQueryOrPopular(apiService.query, page);\n}\n\nfunction resetButtons() {\n  refs.pagination.innerHTML = \"\";\n  refs.firstButton.innerHTML = \"\";\n  refs.lastButton.innerHTML = \"\";\n}\n\nfunction onClickButton(event) {\n  event.preventDefault();\n  //если клик не в кнопку, а в див - ничо не делаем. Позже кнопку расширю паддингами\n  if (event.target === event.currentTarget) return;\n  page = Number(event.target.dataset.page);\n  isQueryOrPopular(apiService.query, page);\n}\n\n//проверка существования точек после первой кнопки\n//нужно для их рендера или удаления\nfunction isFirstThreeDots() {\n  const isThreeDots = document.querySelector(\".page-buttons__first-points\");\n  if (isThreeDots === null) {\n    return false;\n  }\n  return true;\n}\n\n//проверка существования точек перед последней кнопкой\n//нужно для их рендера или удаления\nfunction isLastThreeDots() {\n  const isThreeDots = document.querySelector(\".page-buttons__last-points\");\n  if (isThreeDots === null) {\n    return false;\n  }\n  return true;\n}\n\nfunction renderFirstButtonAndDots() {\n  const firstButton = `<button id=\"paginationButton\" data-page=\"1\" class=\"button-page paginationButton\">1</button>`;\n  const threeDots = `<span class='page-buttons__first-points'>···</span>`;\n  refs.firstButton.insertAdjacentHTML(\"beforeend\", firstButton);\n  refs.firstButton.insertAdjacentHTML(\"beforeend\", threeDots);\n}\n\nfunction renderLastButtonAndDots(totalPages) {\n  const lastButton = `<button id=\"paginationButton\" data-page=\"${totalPages}\" class=\"button-page paginationButton\">${totalPages}</button>`;\n  const threeDots = `<span class='page-buttons__last-points'>···</span>`;\n  refs.lastButton.insertAdjacentHTML(\"beforeend\", threeDots);\n  refs.lastButton.insertAdjacentHTML(\"beforeend\", lastButton);\n  refs.lastButton.style.marginRight = \"10px\";\n}\n\n//Рендер кнопок и карточек по поиску.\nfunction renderPaginationOnSearch(query, queryPage) {\n  apiService.query = query;\n  apiService.page = queryPage;\n  sessionStorage.setItem(\"query\", query);\n  sessionStorage.setItem(\"page\", queryPage);\n  apiService.fetchMoviesySearch().then(({ results, total_pages }) => {\n    if (results.length === 0) {\n      refs.inputError.textContent =\n        \"Search result not successful. Enter the correct movie name and smile : )\";\n      return;\n    }\n    clearFilmsContainer();\n    appendFilmsMarkup(results, refs.filmsContainerIndex);\n    resetButtons();\n    renderButtons(apiService.page, total_pages);\n  });\n}\n\n//Рендер кнопок и карточек популярных фильмов\nfunction renderPaginationPopular(pagePopular) {\n  page = pagePopular;\n  apiService.page = page;\n  apiService.query = \"\";\n  sessionStorage.setItem(\"query\", apiService.query);\n  sessionStorage.setItem(\"page\", page);\n  apiService.fetchPopular().then(({ results, total_pages }) => {\n    clearFilmsContainer();\n    appendFilmsMarkup(results, refs.filmsContainerIndex);\n    resetButtons();\n    renderButtons(apiService.page, total_pages);\n  });\n}\n\n//Чё рендерить-то - популярные или поиск? Вот функция и разбирается\n//Заодно после рендера поднимает вьюпорт в самый верх\nfunction isQueryOrPopular(query, page) {\n  if (query === \"\") {\n    dispaySpan(query, page);\n    renderPaginationPopular(page);\n    moveToTop();\n    return;\n  } else {\n    dispaySpan(query, page);\n    renderPaginationOnSearch(query, page);\n    moveToTop();\n  }\n}\n\n//функция для поднятия в небеса\nfunction moveToTop() {\n  window.scrollTo(pageXOffset, 0);\n}\n\nexport { renderButtons, renderPaginationOnSearch, isQueryOrPopular };\n","import ApiService from \"./API\";\nimport appendFilmsMarkup from \"./appendFilmsMarkup\";\nimport { renderButtons, isQueryOrPopular } from \"./pagination\";\n\nconst apiService = new ApiService();\nconst filmsContainerIndex = document.querySelector(\".js-films-list-index\");\nconst logo = document.querySelector(\".logo\");\n\nwindow.addEventListener(\"load\", loadPage);\nlogo.addEventListener(\"click\", loadPopularPage);\n\nexport default function loadPage() {\n  let query = sessionStorage.getItem(\"query\");\n  let page = sessionStorage.getItem(\"page\");\n  if (query === null) query = \"\";\n  if (page === null) page = 1;\n  isQueryOrPopular(query, Number(page));\n}\n\nfunction loadPopularPage(e) {\n  e.preventDefault();\n  const query = \"\";\n  const page = 1;\n  isQueryOrPopular(query, page);\n}\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = throttle;\n","import { trim } from \"lodash.throttle\";\nimport ApiService from \"./API\";\nimport appendFilmsMarkup from \"./appendFilmsMarkup\";\nimport clearFilmsContainer from \"./clearFilmsContainer\";\nimport { isQueryOrPopular } from \"./pagination\";\n\nconst apiService = new ApiService();\n\nconst searchForm = document.querySelector(\".input__wraper\");\nconst inputError = document.querySelector(\".input__error\");\nconst filmsContainerIndex = document.querySelector(\".js-films-list-index\");\n\nsearchForm.addEventListener(\"submit\", onSearch);\n\nexport function onSearch(e) {\n  e.preventDefault();\n\n  apiService.query = e.currentTarget.searchQuery.value.trim();\n  inputError.textContent = \" \";\n\n  apiService.resetPage();\n\n  if (!apiService.query) {\n    inputError.textContent = \"Please enter something to search \";\n    return;\n  }\n\n  isQueryOrPopular(apiService.query, apiService.page);\n\n  // apiService\n  //   .fetchMoviesySearch()\n  //   .then(({ results, total_pages }) => {\n  //     if (results.length === 0) {\n  //       inputError.textContent =\n  //         \"Search result not successful. Enter the correct movie name and smile : )\";\n  //       return;\n  //     }\n  //     clearFilmsContainer();\n  //     appendFilmsMarkup(results, filmsContainerIndex);\n  //   })\n  //   .catch(error => console.log(error));\n}\n","// let currentActiveBtn = \"\";\nlet fetch = {};\nconst allWatched = [];\nconst allQueue = [];\n\nconst save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error(\"Set state error: \", error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error(\"Get state error: \", error.message);\n  }\n};\n\nexport function createConst(obj) {\n  fetch = obj;\n}\n\nfunction addWatched() {\n  const addWatchedBtn = document.querySelector(\".btn-watch\");\n  addWatchedBtn.addEventListener(\"click\", onAddWatchedClick);\n}\n\nfunction onAddWatchedClick(e) {\n  const currentActiveBtn = document.querySelector(\".btn-watch.is-active\");\n\n  // e.currentTarget.textContent = \"Remove from watched\";\n  e.currentTarget.classList.toggle(\"is-active\");\n  const savedLocalInfo = load(\"allWatchedMovies\");\n\n  if (currentActiveBtn) {\n    // e.currentTarget.textContent = \"add to Watched\";\n    let index;\n    savedLocalInfo.forEach(({ id }, i) => (id === fetch.id ? (index = i) : i));\n    allWatched.splice(index, 1);\n    save(`allWatchedMovies`, allWatched);\n  }\n\n  const isInArray = savedLocalInfo\n    ? savedLocalInfo.find(({ id }) => id === fetch.id)\n    : false;\n\n  if (!!isInArray) {\n    return;\n  }\n\n  allWatched.push(fetch);\n  save(`allWatchedMovies`, allWatched);\n}\n\nfunction addQueue() {\n  const addWatchedBtn = document.querySelector(\".btn-queue\");\n  addWatchedBtn.addEventListener(\"click\", onAddQueueClick);\n}\n\nfunction onAddQueueClick(e) {\n  const currentActiveBtn = document.querySelector(\".btn-queue.is-active\");\n\n  // e.currentTarget.textContent = \"Remove from Queue\";\n  e.currentTarget.classList.toggle(\"is-active\");\n  const savedLocalInfo = load(\"allQueueMovies\");\n\n  if (currentActiveBtn) {\n    e.currentTarget.textContent = \"add to Queue\";\n    let index;\n    savedLocalInfo.forEach(({ id }, i) => (id === fetch.id ? (index = i) : i));\n    allQueue.splice(index, 1);\n    save(`allQueueMovies`, allQueue);\n  }\n\n  const isInArray = savedLocalInfo\n    ? savedLocalInfo.find(({ id }) => id === fetch.id)\n    : false;\n\n  if (!!isInArray) {\n    return;\n  }\n\n  allQueue.push(fetch);\n  save(`allQueueMovies`, allQueue);\n}\n\nexport { addWatched, addQueue };\n","import * as basicLightbox from \"basiclightbox\";\nimport ApiService from \"./API\";\nimport settings from \"./settings\";\nimport { createConst, addWatched, addQueue } from \"./onButtonClick\";\nimport { addListener } from \"./trailer\";\nimport { normalizationMovieObj } from \"./normalization-obj\";\nconst { IMG_URL } = settings;\n\nconst getImgPath = imgPath => (!imgPath ? `${noImg}` : `${IMG_URL}${imgPath}`);\n\nconst apiService = new ApiService();\n\nasync function filmDetails(id) {\n  const details = await apiService.getMovieDetails(id).then(results => results);\n  const normalizeDetails = normalizationMovieObj(details);\n  createConst(normalizeDetails);\n  return normalizeDetails;\n}\n\nconst ref = {\n  cardContainer: document.querySelector(\".films__container\"),\n};\n\nref.cardContainer.addEventListener(\"click\", onClickCard);\n\nasync function onClickCard(e) {\n  e.preventDefault();\n\n  // console.log(e.target);\n  if (e.target.nodeName !== \"DIV\" && e.target.nodeName !== \"UL\") {\n    if (e.target.nodeName === \"IMG\") {\n      const id = e.target.parentElement.parentElement.parentElement.dataset.id;\n      // console.log(e.target.parentElement.parentElement.parentElement);\n      const details = await filmDetails(id);\n      renderModal(details);\n    }\n    if (e.target.nodeName === \"P\") {\n      const id = e.target.parentElement.parentElement.parentElement.dataset.id;\n      // console.log(e.target.parentElement.parentElement.parentElement);\n      const details = await filmDetails(id);\n      renderModal(details);\n    }\n  }\n\n  function renderModal({\n    id,\n    img,\n    title,\n    popularity,\n    vote,\n    votes,\n    about,\n    genre,\n  }) {\n    const modal = basicLightbox.create(\n      `\n    <div class=\"modal__container\">\n      <div class=\"modal__close\">\n        <div class=\"modal__close-first\"></div>\n        <div class=\"modal__close-second\"></div>\n      </div>\n      <div class=\"modal-wrap\">\n        <div class=\"modal__picture-wrap\">\n          <img\n          class=\"modal__picture\"\n          src=\"${img}\"\n          alt=\"film-picture\"\n          />\n          <button class=\"modal__button-play trailer-button\" data-id=\"${id}\">\n            <img class=\"modal__img-play\" src=\"https://www.freepnglogos.com/uploads/play-button-png/play-button-file-youtube-play-buttom-icon-svg-wikimedia-commons-27.png\" alt=\"play trailer\" width=\"100\" height=\"100\" />\n\t\t\t\t\t</button>\n        </div>\n        <div class=\"modal__desc-wrap\">\n          <h2 class=\"modal-heading\">${title}</h2>\n          <div class=\"modal__rating-wrap\">\n            <ul class=\"modal__rating-left-list\">\n              <li class=\"modal__rating-left-item\">Vote / Votes</li>\n              <li class=\"modal__rating-left-item\">Popularity</li>\n              <li class=\"modal__rating-left-item\">Original Title</li>\n              <li class=\"modal__rating-left-item\">Genre</li>\n            </ul>\n            <ul class=\"modal__rating-right-list\">\n              <li class=\"modal__rating-right-item\">\n                <span class=\"modal__rating-right-item--color\">${vote}</span> /\n                <span class=\"modal__rating-right-item--shadow\">${votes}</span>\n              </li>\n              <li class=\"modal__rating-right-item\">${popularity}</li>\n              <li class=\"modal__rating-right-item modal__rating-right-item--uppercase\">${title}</li>\n              <li class=\"modal__rating-right-item\">${genre}</li>\n            </ul>\n          </div>\n          <div class=\"modal__content-wrap\">\n            <h4 class=\"modal__content-heading\">About</h4>\n            <p class=\"modal__content\">\n              ${about}\n            </p>\n          </div>\n          <div class=\"modal__button-wrap\" data-id=\"${id}\">\n            <button class=\"modal__button btn-watch\">add to Watched</button>\n            <button class=\"modal__button btn-queue\">add to queue</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  `,\n      {\n        onShow: modal => {\n          window.addEventListener(\"keydown\", escapeKeyCloseModal);\n          window.addEventListener(\"click\", clickForCloseModal);\n          modal.element().querySelector(\".modal__close\").onclick = modal.close;\n        },\n        onClose: modal => {\n          window.removeEventListener(\"keydown\", escapeKeyCloseModal);\n          window.removeEventListener(\"click\", clickForCloseModal);\n        },\n      }\n    );\n\n    function escapeKeyCloseModal(event) {\n      if (event.code === \"Escape\") {\n        modal.close();\n      }\n    }\n\n    function clickForCloseModal(event) {\n      console.log(event.target.classList.value);\n      if (event.target.classList.value === \"basicLightbox__placeholder\") {\n        modal.close();\n      }\n    }\n\n    modal.show();\n  }\n\n  addListener();\n\n  addWatched();\n\n  addQueue();\n}\n","import MovieApiService from \"./API.js\";\n\nconst movieApiService = new MovieApiService();\n\nconst trailerWindow = document.querySelector(\".trailer__window\");\nconst trailerBackdrop = document.querySelector(\".trailer__backdrop\");\n\nexport function addListener() {\n  const trailerBtn = document.querySelector(\".modal__button-play\");\n  trailerBtn.addEventListener(\"click\", onClickTrailer);\n}\n\nfunction onClickTrailer(event) {\n  const id = event.currentTarget.dataset.id;\n  movieApiService.fetchTrailer(id).then(({ results }) => {\n    results.forEach(result => {\n      if (result.name === \"Official Trailer\") {\n        console.log(result.key);\n        const modal = document.querySelector(\n          \".basicLightbox .modal__container\"\n        );\n        modal.classList.add(\"visually-hidden\");\n        // setAttribut(result.key);\n        appendMarkupTrailer(result.key);\n      }\n    });\n  });\n}\n\ntrailerBackdrop.addEventListener(\"click\", e => {\n  if (e.target !== trailerBackdrop) {\n    return;\n  }\n  closeModal();\n});\n\nfunction appendMarkupTrailer(key) {\n  console.log(key);\n  trailerBackdrop.classList.remove(\"visually-hidden\");\n  trailerWindow.innerHTML = `\n  <iframe class=\"trailer__iframe\" width=\"700\" height=\"500\" src=\"https://www.youtube.com/embed/${key}\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n  `;\n\n  trailerBackdrop.addEventListener(\"click\", e => {\n    if (e.target !== trailerBackdrop) {\n      return;\n    }\n    closeModal();\n  });\n}\n\nfunction closeModal() {\n  const modal = document.querySelector(\".basicLightbox .modal__container\");\n  modal.classList.remove(\"visually-hidden\");\n  trailerBackdrop.classList.add(\"visually-hidden\");\n  trailerWindow.innerHTML = \"\";\n}\n\n// function setAttribut(key) {\n//   trailerBackdrop.classList.remove('visually-hidden');\n//   console.log(iFrame.getAttribute('src'));\n//   iFrame.setAttribute('src', `https://www.youtube.com/embed/${key}`);\n//   console.log(iFrame.getAttribute('src'));\n\n// // Notiflix.Notify.init({ position: \"center-top\" });\n\n//  filmsList.addEventListener(\"click\", onTrailerBtnClick);\n\n//  closeButton.addEventListener(\"click\", e => {\n//   e.preventDefault();\n//   closeModal();\n// });\n\n// async function onTrailerBtnClick(event) {\n//   const item = event.target.closest(\".trailer-button\");\n\n//   if (!item) return;\n\n//   const link = document.querySelector(\".films__item\");\n//   const id = link.dataset.id;\n//   try {\n//     const trailerId = await getTrailer(id);\n//     openModal(trailerId);\n//   } catch (error) {\n//     // Notiflix.Notify.failure(\"Trailer not found\");\n//   }\n// }\n\n// export function openModal(key) {\n//    trailerWindow.innerHTML = `<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/${key}\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>`;\n\n//    trailerBackdrop.addEventListener(\"click\", e => {\n//     if (e.target !==  trailerBackdrop) {\n//       return;\n//     }\n//     closeModal();\n//   });\n// }\n"],"names":["parcelRequire","register","JSON","parse","$c18728699409a792$export$2e2bcd8739ae039","API_KEY","BASE_URL","IMG_URL","$5218132799586293$var$API_KEY","$5218132799586293$var$BASE_URL","$5218132799586293$var$VIDEO_BY_SEACH","$5218132799586293$export$2e2bcd8739ae039","fetchMoviesySearch","$iiPHV","default","fetch","this","searchQuery","language","currentPage","then","responce","json","finally","async","urlPopular","id","res","movieId","getMoviedId","newId","getItemFromLS","key","localStorage","getItem","addMovie","movieObj","existingEntries","push","setItem","stringify","deleteMovie","newEntries","filter","el","Number","incrementPage","page","resetPage","query","newQuery","constructor","genres","$3e158026f4084825$export$2e2bcd8739ae039","$parcel$interopDefault","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","name","hash","loc","start","line","column","end","compiler","main","stack1","fn","program","inverse","noop","useData","$ec63e886ac5d0269$export$2e2bcd8739ae039","slice","$e01d0f0023876293$exports","URL","resolve","import","meta","url","toString","$739f3359fd5f39a4$var$API_KEY","$739f3359fd5f39a4$var$BASE_URL","$739f3359fd5f39a4$var$IMG_URL","$739f3359fd5f39a4$var$getGenreArray","genre_ids","map","$739f3359fd5f39a4$var$getGenreArrayLibrary","$739f3359fd5f39a4$export$33b719549f9c9a2c","original_title","overview","popularity","poster_path","release_date","vote_average","vote_count","genre","title","about","img","imgPath","releaseDate","date","vote","votes","$dd475a096ad62bc3$export$2e2bcd8739ae039","films","normalObjs","element","temp","length","join","insertAdjacentHTML","$b7d2516cc362ccd4$var$listRef","document","querySelector","$b7d2516cc362ccd4$export$2e2bcd8739ae039","innerHTML","$5faac055611bcd08$var$onSearchSpan","$5faac055611bcd08$export$8a0e961e6f283a89","popularFilmsSpan","onSearchFilmsSpan","$6e1958cdf4558d68$var$apiService","$6e1958cdf4558d68$var$refs","arrowLeft","arrowRight","pagination","firstButton","lastButton","filmsContainerIndex","inputError","searchSpan","$6e1958cdf4558d68$var$totalPages","$6e1958cdf4558d68$var$page","$6e1958cdf4558d68$export$8f52e704dc7391ad","pages","beforeActivePage","afterActivePage","i","pageButton","$6e1958cdf4558d68$var$isFirstThreeDots","threeDots","$6e1958cdf4558d68$var$renderFirstButtonAndDots","style","marginRight","totalPages1","$6e1958cdf4558d68$var$renderLastButtonAndDots","onclick","$6e1958cdf4558d68$var$onClickArrowLeft","$6e1958cdf4558d68$var$onClickArrowRight","$6e1958cdf4558d68$var$onClickButton","$6e1958cdf4558d68$var$onClickFirstButton","$6e1958cdf4558d68$var$onClickLastButton","event","target","nodeName","$6e1958cdf4558d68$export$f6bd13dade8c2826","$6e1958cdf4558d68$var$resetButtons","preventDefault","currentTarget","dataset","page1","sessionStorage","fetchPopular","results","total_pages","$6e1958cdf4558d68$var$moveToTop","queryPage","textContent","$6e1958cdf4558d68$export$64b427446bc657b7","window","scrollTo","pageXOffset","$1568500cd937aa28$var$logo","addEventListener","e","$7244391317ff913c$var$reTrim","$7244391317ff913c$var$reIsBadHex","$7244391317ff913c$var$reIsBinary","$7244391317ff913c$var$reIsOctal","$7244391317ff913c$var$freeParseInt","parseInt","$7244391317ff913c$var$freeGlobal","$parcel$global","$7244391317ff913c$var$freeSelf","self","$7244391317ff913c$var$root","Function","$7244391317ff913c$var$objectToString","$7244391317ff913c$var$nativeMax","Math","max","$7244391317ff913c$var$nativeMin","min","$7244391317ff913c$var$now","Date","now","$7244391317ff913c$var$debounce","func","wait","options","lastArgs","lastThis","maxWait","result1","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","args","thisArg","undefined","apply","leadingEdge","setTimeout","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","result","remainingWait","debounced","isInvoking","arguments","$7244391317ff913c$var$toNumber","$7244391317ff913c$var$isObject","cancel","clearTimeout","flush","value","type","$7244391317ff913c$var$isObjectLike","$7244391317ff913c$var$isSymbol","other","valueOf","replace","isBinary","test","$533396e39deb84e7$var$apiService","$533396e39deb84e7$var$searchForm","$533396e39deb84e7$var$inputError","trim","$dd3c8b3183be679d$var$fetch","$dd3c8b3183be679d$var$allWatched","$dd3c8b3183be679d$var$allQueue","$dd3c8b3183be679d$var$save","serializedState","error","console","message","$dd3c8b3183be679d$var$load","$dd3c8b3183be679d$var$onAddWatchedClick","currentActiveBtn","classList","toggle","savedLocalInfo","index","forEach","splice","find","$dd3c8b3183be679d$var$onAddQueueClick","$9B8F0","$8eeeb03168b9add8$var$movieApiService","$8eeeb03168b9add8$var$trailerWindow","$8eeeb03168b9add8$var$trailerBackdrop","$8eeeb03168b9add8$var$onClickTrailer","fetchTrailer","log","add","remove","$8eeeb03168b9add8$var$closeModal","$222c256defa3381d$var$IMG_URL","$222c256defa3381d$var$apiService","$222c256defa3381d$var$filmDetails","details","getMovieDetails","normalizeDetails","cardContainer","parentElement","renderModal","modal1","create","onShow","modal","escapeKeyCloseModal","clickForCloseModal","close","onClose","removeEventListener","code","show"],"version":3,"file":"index.dadb5f89.js.map"}