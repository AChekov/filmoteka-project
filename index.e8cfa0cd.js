function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},o=e.parcelRequire37c5;null==o&&((o=function(t){if(t in n)return n[t].exports;if(t in a){var e=a[t];delete a[t];var o={id:t,exports:{}};return n[t]=o,e.call(o.exports,o,o.exports),o.exports}var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){a[t]=e},e.parcelRequire37c5=o),o("kyEFX").register(JSON.parse('{"5ZPII":"index.e8cfa0cd.js","9cBl5":"noImageAvailable.4bf2d6d5.jpg","b9auz":"index.2c83ed66.js"}'));var r={API_KEY:"7cb8097836a7a1f4e5c19953961668c8",BASE_URL:"https://api.themoviedb.org/3",IMG_URL:"https://image.tmdb.org/t/p/w500/"};const{API_KEY:i,BASE_URL:l}=r,s=`${l}/search/movie?api_key=${i}&include_adult=false`;class c{fetchMoviesySearch(){return fetch(`${s}&query=${this.searchQuery}&language=${this.language}&page=${this.currentPage}`).then((t=>t.json()))}async fetchPopular(){const t=`${l}/trending/movie/day?api_key=${i}&page=${this.currentPage}`;return fetch(t).then((t=>t.json()))}async getMovieDetails(t){return fetch(`${l}/movie/${t}?api_key=${i}`).then((t=>t.json()))}async fetchById(){const t=await fetch(`${l}/movie/${this.movieId}?api_key=${i}`);return await t.json()}async fetchTrailer(t){const e=await fetch(`${l}/movie/${t}/videos?api_key=${i}`);return await e.json()}getMoviedId(t){this.movieId=t}getItemFromLS(t){return localStorage.getItem(t)}addMovie(t,e){let n=JSON.parse(this.getItemFromLS(e));return null===n&&(n=[]),n.push(t),localStorage.setItem(e,JSON.stringify(n))}deleteMovie(t){let e=JSON.parse(this.getItemFromLS(t));const n=e.filter((t=>t.id!==Number(this.movieId)));return e=n,localStorage.setItem(t,JSON.stringify(e))}incrementPage(){this.page+=1}resetPage(){this.page=1}get query(){return this.searchQuery}set query(t){this.searchQuery=t}get page(){return this.currentPage}set page(t){this.currentPage=t}constructor(){this.searchQuery="",this.currentPage=1,this.language="en-US",this.genres="",this.movieId=0}}var u=t(o("amrNH")).template({1:function(t,e,n,a,o){var r,i=null!=e?e:t.nullContext||{},l=t.hooks.helperMissing,s="function",c=t.escapeExpression,u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<li class="films__item" data-id='+c(typeof(r=null!=(r=u(n,"id")||(null!=e?u(e,"id"):e))?r:l)===s?r.call(i,{name:"id",hash:{},data:o,loc:{start:{line:2,column:32},end:{line:2,column:38}}}):r)+'>\n\t<img\n\t\t\t\tclass="films__img"\n\t\t\t\tsrc="'+c(typeof(r=null!=(r=u(n,"img")||(null!=e?u(e,"img"):e))?r:l)===s?r.call(i,{name:"img",hash:{},data:o,loc:{start:{line:5,column:9},end:{line:5,column:16}}}):r)+'"\n\t\t\t\talt="'+c(typeof(r=null!=(r=u(n,"title")||(null!=e?u(e,"title"):e))?r:l)===s?r.call(i,{name:"title",hash:{},data:o,loc:{start:{line:6,column:9},end:{line:6,column:18}}}):r)+'"\n\t\t\t\tloading="lazy"\n\t\t\t/>\n\t\t\t<div class="films__info">\n\t\t\t\t<p class="films__name">'+c(typeof(r=null!=(r=u(n,"title")||(null!=e?u(e,"title"):e))?r:l)===s?r.call(i,{name:"title",hash:{},data:o,loc:{start:{line:10,column:27},end:{line:10,column:36}}}):r)+'</p>\n\n\t\t\t\t<p class="films__description">\n\t\t\t\t\t'+c(typeof(r=null!=(r=u(n,"genre")||(null!=e?u(e,"genre"):e))?r:l)===s?r.call(i,{name:"genre",hash:{},data:o,loc:{start:{line:13,column:5},end:{line:13,column:14}}}):r)+" | "+c(typeof(r=null!=(r=u(n,"releaseDate")||(null!=e?u(e,"releaseDate"):e))?r:l)===s?r.call(i,{name:"releaseDate",hash:{},data:o,loc:{start:{line:13,column:17},end:{line:13,column:32}}}):r)+"\n\t\t\t\t</p>\n\t\t\t</div>\n\n\t\t\t  <div class='trailer-button'>\n      <a href='#' class='video-play-btn' aria-label='watch trailer'></a>\n    </div>\n</li>\n"},compiler:[8,">= 4.3.0"],main:function(t,e,n,a,o){var r;return null!=(r=(t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]})(n,"each").call(null!=e?e:t.nullContext||{},e,{name:"each",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:1,column:0},end:{line:21,column:9}}}))?r:""},useData:!0}),d={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};[1,2,3,4,5,6,7].slice(0,4);var m;m=new URL(o("kyEFX").resolve("9cBl5"),import.meta.url).toString();const{API_KEY:g,BASE_URL:p,IMG_URL:f}=r,h=t=>t.map((t=>d[`${t}`])),_=t=>t.map((t=>t.name)),v=({genres:e=null,genre_ids:n=null,id:a,original_title:o,overview:r,popularity:i,poster_path:l,release_date:s,vote_average:c,vote_count:u})=>{return{genre:n?h(n):_(e),id:a,title:o,about:r,popularity:i,img:(g=l,g?`${f}${g}`:`${t(m)}`),releaseDate:s?(d=s,d?d.slice(0,4):data):"",vote:c,votes:u};var d,g};function y(t,e){const n=t.map((t=>{let e=v(t);return e.genre.length<=3?e.genre=e.genre.join(", "):e.genre=[e.genre[0],e.genre[1],"Other"].join(", "),e}));e.insertAdjacentHTML("beforeend",u(n))}const b=document.querySelector(".js-films-list-index");function w(){b.innerHTML=""}const S=new c,T={arrowLeft:document.querySelector("button[aria-label='previous-page'"),arrowRight:document.querySelector("button[aria-label='next-page'"),pagination:document.querySelector(".pagination"),firstButton:document.querySelector(".firstButton-and-threeDots"),lastButton:document.querySelector(".lastButton-and-threeDots"),filmsContainerIndex:document.querySelector(".js-films-list-index"),inputError:document.querySelector(".input__error")};let L,$=1;function M(t,e){if($>L)return;$=t,L=e;let n=$-2,a=$+2;$!==L&&$+1!==L||(n=$-3,a=L),$+3===L&&(a=L),n<3&&(n=1,a=5),L<=5&&(n=$,a=L);for(let t=n;t<=a;t+=1)if(t===$){const e=`<button id="paginationButton" data-page="${t}" class="button-page paginationButton active">${t}</button>`;T.pagination.insertAdjacentHTML("beforeend",e)}else{const e=`<button id="paginationButton" data-page="${t}" class="button-page paginationButton">${t}</button>`;T.pagination.insertAdjacentHTML("beforeend",e)}if(n>=3){if(k())return;!function(){const t='<button id="paginationButton" data-page="1" class="button-page paginationButton">1</button>',e="<span class='page-buttons__first-points'>···</span>";T.firstButton.insertAdjacentHTML("beforeend",t),T.firstButton.insertAdjacentHTML("beforeend",e)}()}n<3&&k()&&(T.firstButton.innerHTML=""),$!==L&&$+1!==L&&$+2!==L&&$+3!==L?null===document.querySelector(".page-buttons__last-points")&&(!function(t){const e=`<button id="paginationButton" data-page="${t}" class="button-page paginationButton">${t}</button>`,n="<span class='page-buttons__last-points'>···</span>";T.lastButton.insertAdjacentHTML("beforeend",n),T.lastButton.insertAdjacentHTML("beforeend",e)}(L),T.arrowLeft.onclick=j,T.arrowRight.onclick=B,T.pagination.onclick=N,T.firstButton.onclick=q,T.lastButton.onclick=E):T.lastButton.innerHTML=""}function q(t){"BUTTON"===t.target.nodeName&&($=1,O())}function E(t){"BUTTON"===t.target.nodeName&&($=L,O())}function j(){1!==$&&($-=1,O())}function B(){$!==L&&($+=1,O())}function x(){T.pagination.innerHTML="",T.firstButton.innerHTML="",T.lastButton.innerHTML=""}function N(t){t.preventDefault(),t.target!==t.currentTarget&&($=Number(t.target.dataset.page),O())}function k(){return null!==document.querySelector(".page-buttons__first-points")}function I(t,e){S.query=t,S.page=e,S.fetchMoviesySearch().then((({results:t,total_pages:e})=>{0!==t.length?(w(),y(t,T.filmsContainerIndex),x(),M(S.page,e)):T.inputError.textContent="Search result not successful. Enter the correct movie name and smile : )"}))}function O(){if(""===S.query)return S.page=$,S.fetchPopular().then((({results:t,total_pages:e})=>{w(),y(t,T.filmsContainerIndex),x(),M(S.page,e)})),void H();I(S.query,$),H()}function H(){window.scrollTo(pageXOffset,0)}const P=new c,A=document.querySelector(".js-films-list-index");window.addEventListener("load",(function(){P.fetchPopular().then((({results:t,total_pages:e})=>{y(t,A),M(P.page,e)}))}));var C=/^\s+|\s+$/g,D=/^[-+]0x[0-9a-f]+$/i,R=/^0b[01]+$/i,U=/^0o[0-7]+$/i,F=parseInt,Q="object"==typeof e&&e&&e.Object===Object&&e,J="object"==typeof self&&self&&self.Object===Object&&self,W=Q||J||Function("return this")(),G=Object.prototype.toString,V=Math.max,Y=Math.min,K=function(){return W.Date.now()};function X(t,e,n){var a,o,r,i,l,s,c=0,u=!1,d=!1,m=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function g(e){var n=a,r=o;return a=o=void 0,c=e,i=t.apply(r,n)}function p(t){return c=t,l=setTimeout(h,e),u?g(t):i}function f(t){var n=t-s;return void 0===s||n>=e||n<0||d&&t-c>=r}function h(){var t=K();if(f(t))return _(t);l=setTimeout(h,function(t){var n=e-(t-s);return d?Y(n,r-(t-c)):n}(t))}function _(t){return l=void 0,m&&a?g(t):(a=o=void 0,i)}function v(){var t=K(),n=f(t);if(a=arguments,o=this,s=t,n){if(void 0===l)return p(s);if(d)return l=setTimeout(h,e),g(s)}return void 0===l&&(l=setTimeout(h,e)),i}return e=Z(e)||0,z(n)&&(u=!!n.leading,r=(d="maxWait"in n)?V(Z(n.maxWait)||0,e):r,m="trailing"in n?!!n.trailing:m),v.cancel=function(){void 0!==l&&clearTimeout(l),c=0,a=s=o=l=void 0},v.flush=function(){return void 0===l?i:_(K())},v}function z(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Z(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==G.call(t)}(t))return NaN;if(z(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=z(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(C,"");var n=R.test(t);return n||U.test(t)?F(t.slice(2),n?2:8):D.test(t)?NaN:+t}const tt=new c,et=document.querySelector(".input__wraper"),nt=document.querySelector(".input__error");document.querySelector(".js-films-list-index");et.addEventListener("submit",(function(t){if(t.preventDefault(),tt.query=t.currentTarget.searchQuery.value.trim(),nt.textContent=" ",tt.resetPage(),!tt.query)return void(nt.textContent="Please enter something to search ");I(tt.query,tt.page)})),o("jxohN");let at="",ot={};const rt=[],it=[],lt=(t,e)=>{try{const n=JSON.stringify(e);localStorage.setItem(t,n)}catch(t){console.error("Set state error: ",t.message)}},st=t=>{try{const e=localStorage.getItem(t);return null===e?void 0:JSON.parse(e)}catch(t){console.error("Get state error: ",t.message)}};function ct(t){if("BUTTON"!==t.target.nodeName)return;at=document.querySelector(".modal__button-active");t.currentTarget.parentNode.dataset.id;t.currentTarget.textContent="Remove from watched",t.currentTarget.classList.toggle("modal__button-active"),at&&(t.currentTarget.textContent="add to Watched"),lt("watchedMovies",ot);const e=st("watchedMovies");rt.push(e),lt("allWatchedMovies",rt)}function ut(t){if("BUTTON"!==t.target.nodeName)return;at=document.querySelector(".modal__button-active");t.currentTarget.parentNode.dataset.id;t.currentTarget.textContent="Remove from Queue",t.currentTarget.classList.toggle("modal__button-active"),at&&(t.currentTarget.textContent="add to Queue"),lt("queueMovies",ot);const e=st("queueMovies");it.push(e),lt("allQueueMovies",it)}var dt=o("9B8F0");const mt=new c,gt=document.querySelector(".trailer__window"),pt=document.querySelector(".trailer__backdrop");function ft(t){const e=t.currentTarget.dataset.id;mt.fetchTrailer(e).then((({results:t})=>{t.forEach((t=>{var e;"Official Trailer"===t.name&&(console.log(t.key),e=t.key,console.log(e),pt.classList.remove("visually-hidden"),gt.innerHTML=`\n  <iframe class="trailer__iframe" width="700" height="500" src="https://www.youtube.com/embed/${e}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>\n  `,pt.addEventListener("click",(t=>{t.target===pt&&ht()})))}))}))}function ht(){pt.classList.add("visually-hidden"),gt.innerHTML=""}pt.addEventListener("click",(t=>{t.target===pt&&ht()}));const{IMG_URL:_t}=r,vt=new c;async function yt(t){const e=await vt.getMovieDetails(t).then((t=>t)),n=v(e);return ot=n,n}({cardContainer:document.querySelector(".films__container")}).cardContainer.addEventListener("click",(async function(t){if(t.preventDefault(),"DIV"!==t.target.nodeName&&"UL"!==t.target.nodeName){if("IMG"===t.target.nodeName){const n=t.target.parentElement.dataset.id;e(await yt(n))}if("P"===t.target.nodeName){const n=t.target.parentElement.parentElement.dataset.id;e(await yt(n))}}function e({id:t,img:e,title:n,popularity:a,vote:o,votes:r,about:i,genre:l}){const s=dt.create(`\n    <div class="modal__container">\n      <div class="modal__close">\n        <div class="modal__close-first"></div>\n        <div class="modal__close-second"></div>\n      </div>\n      <div class="modal-wrap">\n        <div class="modal__picture-wrap">\n          <img\n          class="modal__picture"\n          src="${e}"\n          alt="film-picture"\n          />\n          <button class="modal__button-play trailer-button" data-id="${t}">\n            <img class="modal__img-play" src="https://www.freepnglogos.com/uploads/play-button-png/play-button-file-youtube-play-buttom-icon-svg-wikimedia-commons-27.png" alt="play trailer" width="100" height="100" />\n\t\t\t\t\t</button>\n        </div>\n        <div class="modal__desc-wrap">\n          <h2 class="modal-heading">${n}</h2>\n          <div class="modal__rating-wrap">\n            <ul class="modal__rating-left-list">\n              <li class="modal__rating-left-item">Vote / Votes</li>\n              <li class="modal__rating-left-item">Popularity</li>\n              <li class="modal__rating-left-item">Original Title</li>\n              <li class="modal__rating-left-item">Genre</li>\n            </ul>\n            <ul class="modal__rating-right-list">\n              <li class="modal__rating-right-item">\n                <span class="modal__rating-right-item--color">${o}</span> /\n                <span class="modal__rating-right-item--shadow">${r}</span>\n              </li>\n              <li class="modal__rating-right-item">${a}</li>\n              <li class="modal__rating-right-item modal__rating-right-item--uppercase">${n}</li>\n              <li class="modal__rating-right-item">${l}</li>\n            </ul>\n          </div>\n          <div class="modal__content-wrap">\n            <h4 class="modal__content-heading">About</h4>\n            <p class="modal__content">\n              ${i}\n            </p>\n          </div>\n          <div class="modal__button-wrap" data-id="${t}">\n            <button class="modal__button btn-watch">add to Watched</button>\n            <button class="modal__button btn-queue modal__button--transparent">\n              add to queue\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  `,{onShow:t=>{window.addEventListener("keydown",c),window.addEventListener("click",u),t.element().querySelector(".modal__close").onclick=t.close},onClose:t=>{window.removeEventListener("keydown",c),window.removeEventListener("click",u)}});function c(t){"Escape"===t.code&&s.close()}function u(t){console.log(t.target.classList.value),"basicLightbox__placeholder"===t.target.classList.value&&s.close()}s.show()}document.querySelector(".modal__button-play").addEventListener("click",ft),document.querySelector(".btn-watch").addEventListener("click",ct),document.querySelector(".btn-queue").addEventListener("click",ut)})),o("iiPHV");
//# sourceMappingURL=index.e8cfa0cd.js.map
